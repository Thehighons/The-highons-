
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="The Highon's - Premium creative supplies including keychains, art supplies, stationery, gadgets, and diaries available for inquiry in Navsari.">
    <title>The Highon's - Premium Creative Supplies | Navsari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @font-face {
          font-family: 'Trajan Pro';
          /* src: url('trajan-pro.woff2') format('woff2'), url('trajan-pro.woff') format('woff'); */
          font-display: swap; /* Improves perceived performance */
        }
        :root {
          --bg-dark: #16161a; /* Off Black/Deep Indigo */
          --text-main: #fffffe; /* Off White */
          --text-secondary: #94a1b2; /* Greyish Blue */
          --primary-accent: #7f5af0; /* Vibrant Violet */
          --secondary-accent: #2cb67d; /* Emerald Green */
          --card-bg: #242629; /* Dark Grey */
          --border-color: rgba(148, 161, 178, 0.2); /* Subtle border based on text-secondary */
           --danger-color: #f05a7f; /* Soft Red for errors/increases */
           --success-color: var(--secondary-accent); /* Green for success/discounts */
           /* CSS variable for staggered reveal delay */
           --reveal-delay: 0s;
        }

        /* Smooth Scrolling */
        html {
          scroll-behavior: smooth;
        }

        body {
          font-family: 'Montserrat', sans-serif;
          background-color: var(--bg-dark);
          color: var(--text-main);
          overflow-x: hidden; /* Prevent horizontal scroll */
           /* Removed perspective from body, apply to specific sections instead for better control */
        }
        /* Prevent body scroll when modal is open */
        body.overflow-hidden {
            overflow: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
          font-family: 'Playfair Display', serif;
          color: var(--text-main);
          font-weight: 600;
        }
        .brand-name {
          font-family: 'Trajan Pro', 'Times New Roman', serif; /* Added fallback */
          letter-spacing: 1.5px;
          color: var(--text-main);
          font-weight: bold;
        }

        /* Header Styling */
        header {
          background-color: rgba(22, 22, 26, 0.8); /* Slightly transparent dark bg */
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-color);
           position: sticky; /* Ensure header stays sticky */
           top: 0;
           z-index: 50;
        }
         header > div {
              transform-style: preserve-3d; /* Enable 3D space for children */
         }

        /* Navigation Links */
        .nav-link {
          position: relative;
          color: var(--text-secondary);
          transition: all 0.3s ease;
          padding: 0.5rem 0.25rem;
          font-weight: 500;
           transform: translateZ(1px); /* Nav links slightly forward */
           display: inline-block; /* Needed for transform */
        }
        .nav-link:hover {
          color: var(--text-main);
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--primary-accent); /* Use accent color */
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        .nav-link:hover::after {
            width: 70%; /* Underline effect */
        }

        /* Sections */
        section {
            position: relative; /* Needed for child absolute positioning */
            overflow: hidden; /* Hide parallax elements that move out of bounds */
            /* Add perspective to sections that contain 3D animated elements */
            perspective: 1500px; /* Increased perspective */
        }


        /* Hero Section */
        .hero-section {
            background: radial-gradient(ellipse at bottom, var(--bg-dark) 0%, #1a1a2e 100%);
             perspective: 1000px; /* Specific perspective for hero */
        }
        /* Animated background shapes (Example) */
        .hero-shapes {
             position: absolute;
             inset: 0;
             z-index: 0;
             transform-style: preserve-3d; /* Enable 3D for shapes */
        }
        .hero-shapes div {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-accent), var(--secondary-accent));
            opacity: 0.1;
            animation: drift 20s infinite linear alternate;
             transform: translateZ(-50px); /* Push shapes back in 3D space */
        }
        .hero-shapes div:nth-child(1) { width: 150px; height: 150px; top: 10%; left: 15%; animation-duration: 22s;}
        .hero-shapes div:nth-child(2) { width: 80px; height: 80px; top: 70%; left: 80%; animation-duration: 18s; animation-delay: 2s;}
        .hero-shapes div:nth-child(3) { width: 120px; height: 120px; top: 40%; left: 50%; animation-duration: 25s; animation-delay: 4s;}

        @keyframes drift {
            from { transform: translateY(0px) translateX(0px) rotate(0deg) scale(1) translateZ(-50px); }
            to { transform: translateY(20px) translateX(-15px) rotate(30deg) scale(1.1) translateZ(-50px); }
        }

         .hero-content > div { /* Wrapper for hero text/button */
              position: relative;
              z-index: 10; /* Ensure content is above shapes */
              transform-style: preserve-3d;
         }

        /* Hero image slight float */
         .hero-content img[alt="The Highon's Logo"] {
             animation: float 4s ease-in-out infinite;
             transform: translateZ(20px); /* Logo forward */
             display: block; /* Needed for transform */
         }
          @keyframes float {
            0%, 100% { transform: translateY(0) translateZ(20px); }
            50% { transform: translateY(-10px) translateZ(25px); }
          }

         .hero-content h1 { transform-style: preserve-3d; }
         .hero-content h1 span { transform: translateZ(10px); display: inline-block; } /* 'Creativity' forward */
         .hero-content p { transform: translateZ(5px); } /* Hero text forward */
         .hero-content .btn { transform: translateZ(15px); } /* Hero button forward */


         .hero-section .rounded-full {
              transform: translateZ(10px) rotateZ(var(--rotate-z, 0deg)); /* Hero small images forward, add rotate variable */
              transition: transform 0.5s ease-in-out; /* Add transition */
         }
          /* Define the rotate-z variable for each image (can be set inline or with JS if dynamic) */
         .hero-section .rounded-full:nth-child(1) { --rotate-z: -5deg; }
         .hero-section .rounded-full:nth-child(2) { --rotate-z: 5deg; }
         .hero-section .rounded-full:nth-child(3) { --rotate-z: -3deg; }


        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            border: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            white-space: nowrap;
             transform: translateZ(5px); /* Buttons slightly forward */
             will-change: transform, box-shadow; /* Hint browser */
        }
        .btn::before { /* Subtle shine effect on hover */
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
            z-index: -1;
        }
        .btn:hover::before {
            left: 100%;
        }
         .btn:active { /* Press effect */
             transform: scale(0.98) translateY(1px) translateZ(3px); /* Press down and slightly back */
             box-shadow: inset 0 1px 3px rgba(0,0,0,0.3); /* Inner shadow for pressed look */
         }


        .btn-primary {
            background: linear-gradient(135deg, var(--primary-accent) 0%, #a787ff 100%);
            color: var(--text-main);
            box-shadow: 0 4px 15px rgba(127, 90, 240, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-3px) scale(1.03) translateZ(8px); /* Lift, scale, and move forward */
            box-shadow: 0 6px 20px rgba(127, 90, 240, 0.4);
        }
         .btn-primary:disabled {
             opacity: 0.6;
             cursor: not-allowed;
             transform: none;
             box-shadow: none;
         }
          .btn-primary:disabled::before {
               left: -100%; /* Disable shine effect */
          }


        .btn-secondary {
            background-color: transparent;
            color: var(--primary-accent);
            border: 2px solid var(--primary-accent);
        }
        .btn-secondary:hover {
            background-color: rgba(127, 90, 240, 0.1);
            transform: translateY(-2px) translateZ(6px); /* Lift and move forward */
        }
         .btn-secondary:active { /* Press effect */
             transform: scale(0.95) translateZ(3px); /* Slightly more pronounced press for small buttons */
             box-shadow: inset 0 1px 3px rgba(0,0,0,0.3);
         }


         /* Small buttons for quantity control */
         .btn-small {
             padding: 0.3rem 0.8rem;
             font-size: 0.9rem;
             border-radius: 9999px;
         }


        /* Product Section */
         #products {
            background: linear-gradient(to bottom, var(--bg-dark), #1a1a2e); /* Gradient background */
            padding-top: 8rem;
            padding-bottom: 8rem;
             perspective: 1200px; /* Specific perspective for products */
         }
         #products::before { /* Top separator glow */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(to bottom, rgba(22, 22, 26, 0), rgba(127, 90, 240, 0.1));
            pointer-events: none;
            z-index: 1; /* Ensure separator is above section background but below content */
         }
         /* Ensure products grid content is above separator */
         #products > .max-w-7xl {
             position: relative;
             z-index: 2;
             transform-style: preserve-3d; /* Enable 3D for child elements like grid */
         }

        .category-title {
            background: linear-gradient(135deg, var(--primary-accent) 0%, var(--secondary-accent) 100%);
            color: var(--text-main);
            padding: 12px 32px;
            border-radius: 8px;
            display: inline-block;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(44, 182, 125, 0.2);
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
             transform: translateZ(20px); /* Category title forward */
             will-change: transform, opacity;
        }

        /* Redesigned Product Card */
        .product-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            transform-style: preserve-3d; /* For tilt effect */
            box-shadow: 0 5px 15px rgba(0,0,0, 0.2);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
             /* Initial state for reveal animation */
             opacity: 0;
             /* Start slightly below and scaled down */
             transform: translateY(50px) scale(0.9);
             transform-origin: center bottom; /* Rotate/scale from the bottom edge */
             will-change: transform, opacity; /* Hint browser */
        }
         /* Product card visible state (controlled by JS observer) */
        .product-card.visible {
            opacity: 1;
            transform: translateY(0) scale(1); /* End at original position/scale */
            transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1) var(--reveal-delay), /* Use CSS variable for delay */
                        transform 0.8s cubic-bezier(0.22, 1, 0.36, 1) var(--reveal-delay); /* Use same curve */
        }


        .product-card:hover {
            transform: translateY(-15px) rotateX(5deg) rotateY(-3deg) scale(1.03) translateZ(20px); /* More pronounced tilt, lift, and move forward */
            box-shadow: 0 15px 30px rgba(0,0,0, 0.3);
            border-color: rgba(127, 90, 240, 0.5); /* Accent border on hover */
        }

         .product-card::after { /* Subtle glow effect */
             content: '';
             position: absolute;
             inset: -1px;
             background: radial-gradient(ellipse at center, rgba(127, 90, 240, 0.2), transparent 70%);
             opacity: 0;
             transition: opacity 0.4s ease;
             z-index: -1;
             border-radius: 16px;
         }
         .product-card:hover::after {
             opacity: 1;
         }

        .product-image-wrapper {
            height: 200px;
            background-color: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
            position: relative;
            z-index: 1; /* Ensure image is above card glow */
        }
        .product-image-wrapper img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform 0.4s ease;
             transform: translateZ(5px); /* Promote image layer */
             will-change: transform;
        }
        .product-card:hover .product-image-wrapper img {
            transform: scale(1.15) rotateZ(2deg) translateZ(10px); /* More dynamic zoom/rotate and move forward */
        }

        .product-card-content {
            padding: 1.25rem;
            text-align: center;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
             transform-style: preserve-3d;
        }
        .product-card-content h3 {
             transform: translateZ(2px); /* Card title slightly forward */
             will-change: transform;
        }
         .product-card-content p.product-desc {
             transform: translateZ(1px); /* Card desc slightly forward */
             will-change: transform;
         }
        .product-card .product-price {
            transform: translateZ(3px); /* Price forward */
             will-change: transform;
        }
        /* Product Controls - Centered at the bottom */
        .product-card-controls {
            padding: 0 1.25rem 1.25rem;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
             min-height: 40px; /* Reserve space to prevent jump */
              transform-style: preserve-3d;
        }

        .product-card-controls .btn,
        .product-card-controls .product-quantity-controls {
             transform: translateZ(4px); /* Controls forward */
             will-change: transform;
        }


        /* Filter/Search Styling */
        #productSearch, #categoryFilter, #couponCode {
            background-color: var(--card-bg);
            color: var(--text-main);
            border: 1px solid var(--border-color);
            border-radius: 50px;
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
             transform: translateZ(1px); /* Inputs slightly forward */
             will-change: transform, box-shadow, border-color;
        }
         #productSearch::placeholder, #couponCode::placeholder {
             color: var(--text-secondary);
             opacity: 0.8;
         }
        #productSearch { padding-left: 3rem; }
        #categoryFilter {
          appearance: none;
          background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%2394a1b2"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>');
          background-repeat: no-repeat;
          background-position: right 1rem center;
          background-size: 1em 1em;
          padding-right: 3rem;
        }
         #categoryFilter option {
             background-color: var(--card-bg);
             color: var(--text-main);
         }

        #productSearch:focus, #categoryFilter:focus, #couponCode:focus {
             border-color: var(--primary-accent);
             box-shadow: 0 0 0 2px rgba(127, 90, 240, 0.3);
             outline: none;
             transform: translateZ(8px); /* More lift on focus */
        }
         #couponCode:disabled {
             opacity: 0.6;
             cursor: not-allowed;
         }
        .search-icon { color: var(--text-secondary); }

        /* Form Styling */
        .form-section {
            background-color: var(--bg-dark);
             perspective: 1000px; /* Specific perspective for forms */
        }
        .form-section::before { /* Aurora effect background */
             content: "";
             position: absolute;
             inset: 0;
             background: radial-gradient(circle at 30% 20%, rgba(127, 90, 240, 0.15) 0%, transparent 40%),
                         radial-gradient(circle at 70% 80%, rgba(44, 182, 125, 0.1) 0%, transparent 40%);
             filter: blur(50px);
             z-index: 0;
        }

        .form-container {
            background-color: rgba(36, 38, 41, 0.8);
            backdrop-filter: blur(5px);
             -webkit-backdrop-filter: blur(5px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            position: relative;
            z-index: 1;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
             transform: translateZ(20px); /* Form container forward */
             will-change: transform;
        }
        .form-container label {
             color: var(--text-secondary);
             font-weight: 500;
             font-size: 0.9rem;
             margin-bottom: 0.5rem;
             display: block;
        }
        .form-container input[type="text"],
        .form-container input[type="email"],
        .form-container input[type="tel"],
        .form-container textarea,
        .form-container select {
            background-color: rgba(22, 22, 26, 0.7);
            border: 1px solid var(--border-color);
            color: var(--text-main);
            border-radius: 8px;
            padding: 0.9rem 1rem;
             width: 100%;
             transition: all 0.3s ease;
             transform: translateZ(1px); /* Inputs slightly forward */
             will-change: transform, box-shadow, border-color;
        }
        .form-container input::placeholder,
        .form-container textarea::placeholder {
            color: rgba(148, 161, 178, 0.6);
        }
        .form-container input:focus,
        .form-container textarea:focus,
        .form-container select:focus {
            border-color: var(--primary-accent);
            background-color: rgba(22, 22, 26, 0.9);
             box-shadow: 0 0 0 2px rgba(127, 90, 240, 0.3);
             outline: none;
             transform: translateZ(8px); /* More lift on focus */
        }
         .form-container select option {
             background-color: var(--bg-dark);
             color: var(--text-main);
         }

        /* Order Summary Display */
         #orderSummaryDisplay {
             background-color: rgba(22, 22, 26, 0.7);
             border: 1px solid var(--border-color);
             border-radius: 8px;
             padding: 1rem;
             margin-bottom: 1.5rem;
             min-height: 80px;
             color: var(--text-main);
             font-size: 0.95rem;
              transform: translateZ(5px); /* Order summary forward */
              will-change: transform;
         }
         #orderSummaryDisplay p {
             color: var(--text-secondary);
             text-align: center;
         }
         #orderSummaryDisplay ul {
             list-style: none;
             padding: 0;
             margin: 0;
         }
         #orderSummaryDisplay li {
             padding: 0.5rem 0;
             border-bottom: 1px dashed rgba(148, 161, 178, 0.1);
              display: flex;
              justify-content: space-between;
              align-items: center;
         }
         #orderSummaryDisplay li:last-child {
             border-bottom: none;
         }
         #orderSummaryDisplay .order-item-name {
             font-weight: 600;
             color: var(--text-main);
             flex-grow: 1;
             margin-right: 0.5rem;
         }
         #orderSummaryDisplay .order-item-quantity {
              color: var(--text-secondary);
              font-size: 0.85rem;
         }
         #orderSummaryDisplay .order-item-price {
              font-weight: 500;
              color: var(--text-main);
         }
          #orderSummaryDisplay .order-summary-line {
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 0.5rem 0;
               border-bottom: 1px dashed rgba(148, 161, 178, 0.1);
          }
          #orderSummaryDisplay .order-summary-line:last-child {
              border-bottom: none;
          }

         #orderSummaryDisplay .order-total {
              font-size: 1.2rem;
              font-weight: 700;
              color: var(--secondary-accent);
              margin-top: 1rem;
              text-align: right;
              padding-top: 0.5rem;
              border-top: 1px solid var(--border-color);
         }
         #orderSummaryDisplay .discount-line {
             color: var(--success-color); /* Green for discount */
         }
          #orderSummaryDisplay .increase-line {
              color: var(--danger-color); /* Red for increase */
          }


        /* Contact Section */
        #contact {
            background-color: var(--card-bg);
             perspective: 800px; /* Specific perspective for contact */
        }
        .contact-info-box {
             background-color: rgba(22, 22, 26, 0.8);
             border: 1px solid var(--border-color);
             border-radius: 12px;
             padding: 2rem;
             transition: all 0.3s ease;
             transform: translateZ(10px); /* Contact info box forward */
             will-change: transform, box-shadow, border-color;
        }
        .contact-info-box:hover {
             border-color: var(--primary-accent);
             transform: translateY(-8px) scale(1.02) translateZ(20px); /* Lift, scale, and move further forward */
             box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }
        .contact-info-box a {
            color: var(--primary-accent);
            transition: color 0.3s ease;
            word-break: break-all;
             transform: translateZ(2px); /* Contact links forward */
             display: inline-block; /* Needed for transform */
             will-change: transform;
        }
        .contact-info-box a:hover {
            color: var(--secondary-accent);
        }
        .social-icons a {
            color: var(--text-secondary);
            font-size: 1.75rem;
            transition: all 0.3s ease;
             transform: translateZ(5px); /* Social icons forward */
             display: inline-block; /* Needed for transform */
             will-change: transform;
        }
        .social-icons a:hover {
             color: var(--primary-accent);
             transform: scale(1.2) rotate(5deg) translateZ(10px); /* Scale, rotate, and move further forward */
        }

        /* Footer */
        footer {
            background-color: var(--bg-dark);
            border-top: 1px solid var(--border-color);
        }
        footer .brand-name { color: var(--text-main); }
        footer a { color: var(--text-secondary); transition: color 0.3s ease; }
        footer a:hover { color: var(--primary-accent); }
        footer .text-gray-500 { color: var(--text-secondary); opacity: 0.7; }

        /* Modal Styling */
        .modal-backdrop {
             background-color: rgba(22, 22, 26, 0.7);
             backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
             perspective: 800px; /* Perspective for modal content */
             z-index: 70; /* Ensure modal is on top */
             position: fixed; /* Keep fixed position */
             inset: 0;
             display: flex;
             align-items: center;
             justify-content: center;
             padding: 1rem;
        }
         /* Add animate__animated and animate__zoomIn directly to .modal-content for entry animation */
        .modal-content {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-main);
             box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
             position: relative;
             max-width: lg; /* Use tailwind utility directly */
             width: 100%;
             margin: auto; /* Use auto margin for centering */
             overflow: hidden;
              /* Ensure modal content is far forward in 3D space */
             transform: translateZ(200px);
             will-change: transform, opacity; /* Hint browser */
        }
        .modal-content img { border-radius: 8px; background-color: rgba(255,255,255,0.05); }
        .modal-content h3 { color: var(--text-main); }
        .modal-content p { color: var(--text-secondary); }
        .modal-content .modal-price { color: var(--primary-accent); font-size: 1.8rem; font-weight: 700;}
        .modal-close-btn {
            color: var(--text-secondary);
            transition: all 0.3s ease;
             transform: translateZ(210px); /* Close button even closer */
             position: absolute; /* Keep absolute position */
             top: 1rem;
             right: 1rem;
             font-size: 1.875rem; /* Use tailwind utility size */
             line-height: 1;
             z-index: 10; /* Ensure close button is clickable */
             background: rgba(36, 38, 41, 0.5); /* Add subtle background */
             border-radius: 50%;
             padding: 0.2rem 0.5rem;
        }
        .modal-close-btn:hover {
             color: var(--text-main);
             transform: rotate(90deg) scale(1.1) translateZ(210px); /* Rotate, scale, and stay forward */
        }

        /* Loader */
        .loader {
          border: 4px solid rgba(148, 161, 178, 0.2);
          border-top: 4px solid var(--primary-accent);
          border-radius: 50%;
          width: 50px;
          height: 50px;
          animation: spin 1s linear infinite;
          margin: 80px auto;
           transform: translateZ(10px); /* Loader forward */
           will-change: transform;
        }
        @keyframes spin {
          0% { transform: rotate(0deg) translateZ(10px); }
          100% { transform: rotate(360deg) translateZ(10px); }
        }

        /* Animation Utilities */
        /* Initial state for elements that will be revealed */
        /* Modified reveal for a more pronounced 3D effect and bounce */
        .reveal {
            opacity: 0;
            /* Start slightly below and scaled down */
            transform: translateY(50px) scale(0.9);
            transform-origin: center bottom; /* Rotate/scale from the bottom edge */
            /* transition properties will be set by JS for staggered effect */
            transition: opacity 0.8s cubic-bezier(0.22, 1, 0.36, 1) var(--reveal-delay, 0s), /* Use CSS variable for delay */
                        transform 0.8s cubic-bezier(0.22, 1, 0.36, 1) var(--reveal-delay, 0s); /* Use same curve and delay */
             will-change: opacity, transform; /* Hint browser for performance */
        }
        /* Final state when element is visible */
        .reveal.visible {
            opacity: 1;
            transform: translateY(0) scale(1); /* End at original position/scale */
            /* transition-delay is now applied by JS */
        }

        /* Special case for category titles - simpler reveal */
        .category-title.reveal {
             transform: translateY(30px) translateZ(20px); /* Keep simpler translateY but add translateZ */
             transition: opacity 0.6s ease-out var(--reveal-delay, 0s),
                         transform 0.6s ease-out var(--reveal-delay, 0s);
        }
        .category-title.reveal.visible {
            transform: translateY(0) translateZ(20px);
        }


        /* Order Form Styling (reuses .form-container styles) */
        #orderFormContainer {
             /* Styles already defined under .form-container */
             max-width: 600px;
             margin: 0 auto;
        }


         /* Ensure grids and direct children of productsContainer have preserve-3d */
         #productsContainer > div.grid {
             transform-style: preserve-3d;
         }

         /* Ensure elements involved in parallax have will-change */
         .hero-shapes { will-change: transform; }
         #productsContainer { will-change: transform; }


    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="sticky">
        <div class="max-w-7xl mx-auto flex items-center justify-between p-4">
            <div class="flex items-center">
                <a href="#" class="text-2xl tracking-wide brand-name">THE HIGHON'S</a>
            </div>
            <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
                <a href="#products" class="nav-link">Products</a>
                <a href="#order" class="nav-link">Place Order</a>
                <a href="#request" class="nav-link">Request Product</a>
                <a href="#contact" class="nav-link">Contact</a>
            </nav>
            <div class="md:hidden flex items-center">
                <button onclick="toggleMobileMenu()" class="text-gray-300 hover:text-white focus:outline-none" aria-label="Toggle mobile menu">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-gradient-to-b from-[rgba(36,38,41,0.9)] to-[rgba(22,22,26,0.9)] backdrop-blur-sm border-t border-[rgba(148,161,178,0.2)] p-4 absolute w-full shadow-lg">
            <div class="flex flex-col items-center space-y-4">
                <a href="#products" class="nav-link block py-2" onclick="toggleMobileMenu()">Products</a>
                <a href="#order" class="nav-link block py-2" onclick="toggleMobileMenu()">Place Order</a>
                <a href="#request" class="nav-link block py-2" onclick="toggleMobileMenu()">Request Product</a>
                <a href="#contact" class="nav-link block py-2" onclick="toggleMobileMenu()">Contact</a>
            </div>
        </div>
    </header>

    <section class="hero-section text-center pt-28 pb-20 md:pt-36 md:pb-28 relative">
        <div class="hero-shapes">
            <div></div> <div></div> <div></div>
        </div>

        <div class="max-w-4xl mx-auto px-6 relative hero-content"> <div class="animate__animated animate__fadeInDown"> <img src="GridArt_20250428_230202733.png" alt="The Highon's Logo" class="w-56 sm:w-72 md:w-80 mx-auto mb-8" loading="lazy">
             </div>


            <h1 class="text-4xl md:text-6xl font-bold mb-6 animate__animated animate__fadeInUp">
                Ignite Your <span class="bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-emerald-400">Creativity</span>.
            </h1>
            <p class="text-lg md:text-xl mb-10 text-gray-300 max-w-2xl mx-auto animate__animated animate__fadeInUp animate__delay-1s">
                Discover premium supplies in Navsari. Explore keychains, art materials, stationery, and more.
            </p>
            <a href="#products" class="btn btn-primary text-lg px-10 py-4 animate__animated animate__fadeInUp animate__delay-2s">
                Explore Collection
            </a>
        </div>
         <div class="mt-20 flex justify-center space-x-5 sm:space-x-8 opacity-80 relative z-10"> <img src="Screenshot_20250422_132243_Meesho.jpg" alt="Keychain product" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-purple-500/50 animate__animated animate__fadeIn animate__delay-3s" loading="lazy">
           <img src="Screenshot_20250424_134214_Meesho.jpg" alt="Art supplies" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-emerald-500/50 animate__animated animate__fadeIn animate__delay-4s" loading="lazy" style="animation-delay: 0.4s;">
           <img src="81EROqfMQBL._AC_UF1000,1000_QL80_.jpg" alt="Diary product" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-purple-500/50 animate__animated animate__fadeIn animate__delay-5s" loading="lazy" style="animation-delay: 0.8s;">
         </div>
    </section>

    <section id="products" class="py-20 px-6">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center reveal">Our Collection</h2>
            <div class="flex flex-col md:flex-row justify-between items-center mb-16 gap-6 reveal">
                <div class="relative w-full md:w-2/5 lg:w-1/3">
                    <input type="text" id="productSearch" placeholder="Search products..." class="w-full" aria-label="Search products">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 search-icon"></i>
                </div>
                <div class="filter-selector text-center md:text-right w-full md:w-auto">
                    <label for="categoryFilter" class="mr-2 font-semibold text-gray-400">Filter:</label>
                    <select id="categoryFilter" class="" aria-label="Select product category">
                        <option value="all">All Products</option>
                        <option value="keychains">Keychains</option>
                        <option value="artSupplies">Art Supplies</option>
                        <option value="stationery">Stationery</option>
                        <option value="diaries">Diaries</option>
                        <option value="gadgets">Gadgets</option>
                    </select>
                </div>
            </div>
            <div id="productsContainer" class="relative min-h-[300px]">
                 <div class="loader"></div>
            </div>
        </div>
    </section>

     <section id="order" class="py-20 px-6 form-section">
        <div class="max-w-3xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Place Your Order</h2>
            <div id="orderFormContainer" class="text-left form-container">
                <p class="text-gray-400 mb-6">Items added from the 'Our Collection' section will appear below. Fill in your details to place your order for delivery within Navsari (PIN: 396445).</p>

                <div>
                     <label class="mb-2 block text-secondary">Your Order Summary</label>
                     <div id="orderSummaryDisplay">
                         <p>Add items from the collection above to see your order here.</p>
                     </div>
                </div>

                 <div class="mt-6 mb-4">
                     <label for="couponCode" class="mb-2 block text-secondary">Have a Coupon Code?</label>
                     <input type="text" id="couponCode" placeholder="Enter coupon code (optional)" aria-label="Enter coupon code">
                      <p id="couponFeedback" class="text-sm mt-2 text-gray-400 min-h-[1.2em]"></p> </div>


                <form id="orderForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                     <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-order.html">
                     <input type="hidden" name="_captcha" value="false">
                     <input type="hidden" name="_subject" id="formSubject" value="New Order from The Highon's Site!">
                     <input type="hidden" name="Order Summary" id="hiddenOrderSummary" value="">
                      <div>
                        <label for="orderNotes">Additional Notes (Optional)</label>
                         <textarea id="orderNotes" name="Additional Notes" rows="3" placeholder="Any specific instructions or details?" aria-label="Additional notes for order"></textarea>
                    </div>

                    <div>
                        <label for="orderName">Full Name</label>
                        <input type="text" id="orderName" name="name" placeholder="Enter your full name" required aria-label="Full Name for order">
                    </div>
                    <div>
                        <label for="orderEmail">Email</label>
                        <input type="email" id="orderEmail" name="email" placeholder="Enter your email" required aria-label="Email Address for order">
                    </div>
                     <div>
                        <label for="orderPhone">Phone (+91)</label>
                         <input type="tel" id="orderPhone" name="phone" placeholder="Enter 10-digit number" required pattern="[6-9]\d{9}" title="Please enter a valid 10-digit Indian mobile number (starting with 6, 7, 8, or 9)" aria-label="Phone number for order (starts with 6-9, 10 digits)">
                    </div>
                    <div>
                        <label for="orderAddress">Full Address (Navsari)</label>
                        <input type="text" id="orderAddress" name="address" placeholder="House No, Street, Area, Navsari - 396445" required aria-label="Full Address for order">
                    </div>

                    <button type="button" id="forgetMyDetailsBtn" class="text-sm text-gray-500 hover:text-red-400 focus:outline-none transition-colors duration-200 mt-2 hidden" aria-label="Forget my saved details">
                        Forget My Details
                    </button>


                    <div>
                        <label for="orderPayment">Payment Option</label>
                        <select id="orderPayment" name="payment" class="w-full" aria-label="Payment option">
                            <option value="COD">Cash on Delivery</option>
                            <option value="UPI">UPI Payment</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-full" id="placeOrderBtn">Place Order</button>
                </form>
            </div>
        </div>
    </section>


    <section id="request" class="py-20 px-6 form-section">
        <div class="max-w-2xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Request a Product</h2>
            <p class="text-gray-400 mb-8 max-w-xl mx-auto">Can't find what you're looking for? Let us know, and we'll try our best to source it for you!</p>
            <div class="form-container">
                <form id="requestForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                    <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-request.html">
                    <input type="hidden" name="_subject" value="New Product Request from The Highon's Site">
                    <input type="hidden" name="_captcha" value="false">
                    <div>
                        <label for="requestName">Product Name</label>
                        <input type="text" id="requestName" name="product" placeholder="e.g., Specific brand watercolor set" required aria-label="Product name for request">
                    </div>
                    <div>
                        <label for="requestDetails">Additional Details (Optional)</label>
                        <textarea id="requestDetails" name="details" rows="4" placeholder="Brand, color, size, quantity, etc." aria-label="Additional details for product request"></textarea>
                    </div>
                    <div>
                        <label for="requestEmail">Your Email</label>
                        <input type="email" id="requestEmail" name="email" placeholder="your.email@example.com" required aria-label="Your email address for request">
                    </div>
                    <button type="submit" class="btn btn-primary w-full mt-4">Submit Request</button>
                </form>
            </div>
        </div>
    </section>

    <section id="contact" class="py-20 text-center px-6">
        <div class="max-w-4xl mx-auto reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Get In Touch</h2>
            <div class="grid grid-cols-1 gap-8 text-left">
                <div class="contact-info-box">
                    <h3 class="text-2xl font-semibold mb-6 text-center">Contact Information</h3>
                    <div class="space-y-4 text-center text-lg">
                        <p><span class="font-medium text-gray-400">Email:</span> <a href="mailto:thehighonsofficial@gmail.com">thehighonsofficial@gmail.com</a></p>
                        <p><span class="font-medium text-gray-400">Location:</span> Navsari, Gujarat - 396445</p>
                         <p class="text-sm text-gray-500">(Online orders via this site for local delivery only)</p>
                    </div>
                    <div class="flex justify-center space-x-6 mt-8 social-icons">
                        <a href="https://instagram.com/thehighons" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-10 mt-auto">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-6">
                <div>
                    <span class="text-2xl font-bold tracking-wide brand-name">THE HIGHON'S</span>
                    <p class="mt-1 text-sm text-gray-400">Premium Creative Supplies - Navsari</p>
                </div>
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 text-sm">
                    <a href="#products">Products</a>
                    <a href="#order">Place Order</a>
                    <a href="#request">Request</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500 text-xs">
                <p> <span id="footerYear"></span> The Highon's.</p>
            </div>
        </div>
    </footer>

    <div id="productModal" class="fixed inset-0 modal-backdrop flex items-center justify-center hidden p-4">
        <div class="modal-content relative max-w-lg w-full mx-auto animate__animated animate__zoomIn animate__faster overflow-hidden">
             <button onclick="closeModal()" class="modal-close-btn absolute text-3xl leading-none z-10" aria-label="Close product details modal">&times;</button>
             <div class="p-6 sm:p-8 max-h-[80vh] overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <img id="modalImg" src="" alt="" class="w-full h-64 md:h-full object-contain p-2" loading="lazy">
                    <div class="flex flex-col justify-center">
                        <h3 id="modalName" class="text-2xl lg:text-3xl font-bold mb-3"></h3>
                        <p id="modalDesc" class="text-sm lg:text-base mb-5"></p>
                        <p id="modalPrice" class="modal-price mb-6"></p>
                        <p class="text-sm text-gray-400">To order this item, please go to the <a href="#products" onclick="closeModal()" class="text-purple-400 hover:text-emerald-400 underline">Our Collection section</a> and click 'Add' on the product card.</p>
                    </div>
                </div>
             </div>
        </div>
    </div>

    <script>
        // --- Constants ---
        const USER_DETAILS_STORAGE_KEY = 'highonsUserDetails'; // Key for localStorage
        const CART_STORAGE_KEY = 'highonsCartItems'; // Key for localStorage

        // --- Product Data ---
        const products = {
             keychains: [
                { id: "kc001", name: "Thor Loki Keychain", price: 99, img: "Screenshot_20250422_132243_Meesho.jpg", desc: "High-quality metal keychain featuring Thor and Loki designs" },
                { id: "kc002", name: "Thor Hammer Keychain", price: 89, img: "Screenshot_20250422_131740_Meesho.jpg", desc: "Durable Mjolnir keychain with detailed engraving" },
                { id: "kc003", name: "Demon slayer katana keychain", price: 159, img: "Screenshot_20250424_141150_Meesho.jpg", desc: "Miniature katana keychain from Demon Slayer anime" },
                { id: "kc004", name: "Pikachu Keychain", price: 109, img: "Screenshot_20250422_131948_Meesho.jpg", desc: "Cute Pikachu keychain with enamel finish" }
            ],
            artSupplies: [
                { id: "as001", name: "Camel water colour tube", price: 169, img: "Screenshot_20250424_134214_Meesho.jpg", desc: "Professional-grade watercolor tubes, set of 12 vibrant colors" },
                { id: "as002", name: "FLAIR Acrylic marker", price: 359, img: "Screenshot_20250423_144509_Meesho.jpg", desc: "Premium acrylic paint markers, fine tip for detailed work" },
                { id: "as003", name: "Levin Acrylic Markers", price: 409, img: "Screenshot_20250423_140558_Meesho.jpg", desc: "Dual-tip acrylic markers with broad and fine tips" },
                { id: "as004", name: "Marker Set of 48", price: 299, img: "Touch-48-Color-Marker-Pen-Set-Kids-Art-Essentials-Double-Ended-Vibrant-Colors-Non-Bleeding-Wholesale-Discount-.webp", desc: "48-color marker set with dual tips for versatility" },
                { id: "as005", name: "Markers Set of 24", price: 179, img: "81B5uZXhYEL._AC_UF1000,1000_QL80_.jpg", desc: "24-color marker set, perfect for beginners" },
                { id: "as006", name: "Paint Brush 12 sizes", price: 99, img: "Screenshot_20250423_195924_Meesho.jpg", desc: "Professional paint brush set with 12 different sizes" },
                { id: "as007", name: "Sponge Dabbing Brush 5 Piece Set", price: 99, img: "41fvlzAzMWL._AC_.jpg", desc: "Sponge brush set for texture painting and special effects" },
                { id: "as008", name: "artist gesso + Decor varnish combo", price: 259, img: "camel-combo.jpg", desc: "Premium gesso (100ml) and varnish combo for art projects" }
            ],
            stationery: [
                { id: "st001", name: "Correction Tape", price: 70, img: "51l7S8XUY0L.jpg", desc: "Smooth correction tape for error-free writing" },
                { id: "st002", name: "Hot Melt Glue Gun ", price: 220, img: "71xHhYjWcIL.jpg", desc: "glue gun for more effective bond for crafts" },
                { id: "st003", name: "Sketch Kit", price: 619, img: "Screenshot_20250423_205027_Meesho.jpg", desc: "Complete sketching kit with pencils, erasers and sharpeners" },
                { id: "st004", name: "Luxury Pen", price: 199, img: "Screenshot_20250422_001401.jpg", desc: "Premium metal body pen with smooth ink flow" },
                { id: "st005", name: "Sketch book A5 (100pg)", price: 119, img: "Screenshot_20250423_204415_Meesho.jpg", desc: "A5 size sketchbook with 100gsm paper, 100 pages" }
            ],
            diaries: [
                { id: "di001", name: "Hardcover Diary", price: 249, img: "81EROqfMQBL._AC_UF1000,1000_QL80_.jpg", desc: "Classic hardcover diary with premium paper" },
                { id: "di002", name: "Premium  Diary", price: 319, img: "IMG-20250422-WA0005.jpg", desc: "Premium leather-bound diary" },
                { id: "di003", name: "Mini Diary", price: 219, img: "Screenshot_20250422_215326_Meesho.jpg", desc: "diary with compact size" },
                { id: "di004", name: "Vintage Leather Journal", price: 499, img: "Screenshot_20250426_225225_Amazon.jpg", desc: "Premium leather diary with good quality paper" }
            ],
            gadgets: [
                 { id: "ga001", name: "Mini Thermal Printer", price: 899, img: "placeholder-gadget.png", desc: "Compact thermal printer for labels, notes & fun prints. Bluetooth connectivity." }
            ]
        };

         // --- Coupon Data (Code: { type: 'percentage_discount' | 'fixed_discount' | 'percentage_increase', value: number }) ---
         const coupons = {
             "JIANSPECIAL": { type: "percentage_increase", value: 20 }, // 20% increase (Example from original code)
             "NSL10": { type: "percentage_discount", value: 10 } // 10% discount (Requested by user)
         };


        // --- State Variables ---
        let currentModalProduct = null; // { category: string, index: number, id: string }
        let currentCategoryFilter = 'all';
        let orderItems = {}; // Stores product ID and quantity: { "productId": quantity, ... }


        // --- Utility Functions ---
        function escapeHtml(unsafe) {
            if (typeof unsafe !== 'string') return unsafe;
            return unsafe
                 .replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
        }

        function findProduct(id) {
            for (const categoryKey in products) {
                const product = products[categoryKey].find(p => p.id === id);
                if (product) {
                    // Return product details along with its category
                    return { ...product, category: categoryKey };
                }
            }
            return null; // Product not found
        }

         function saveCart() {
             try {
                 localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(orderItems));
                 console.log("Cart saved:", orderItems);
             } catch (e) {
                 console.error("Error saving cart to localStorage:", e);
             }
         }

         function loadCart() {
             try {
                 const savedCart = localStorage.getItem(CART_STORAGE_KEY);
                 if (savedCart) {
                     const parsedCart = JSON.parse(savedCart);
                     // Basic validation: Ensure it's an object and quantities are numbers > 0
                     if (typeof parsedCart === 'object' && parsedCart !== null) {
                          orderItems = Object.fromEntries(
                              Object.entries(parsedCart)
                                  .filter(([productId, quantity]) => findProduct(productId) && typeof quantity === 'number' && quantity > 0)
                          );
                         console.log("Cart loaded:", orderItems);
                     } else {
                          orderItems = {}; // Start with an empty cart if invalid data is found
                         console.warn("Invalid cart data found in localStorage, starting with empty cart.");
                     }
                 } else {
                     orderItems = {}; // Start with empty cart if nothing is in storage
                     console.log("No cart data found in localStorage, starting with empty cart.");
                 }
             } catch (e) {
                 console.error("Error loading cart from localStorage:", e);
                 orderItems = {}; // Start with empty cart on error
             }
         }


        // --- Product Rendering ---
        function renderProducts(category = 'all', searchTerm = '') {
            const container = document.getElementById("productsContainer");
            if (!container) { console.error("productsContainer not found!"); return; }

            container.innerHTML = '<div class="loader"></div>'; // Show loader

            // Use a small delay to allow loader to show and avoid blocking
            setTimeout(() => {
                 try {
                    container.innerHTML = ''; // Clear loader/previous content
                    let hasProducts = false;
                    const searchTermLower = searchTerm.toLowerCase().trim();
                    currentCategoryFilter = category;
                    let revealIndex = 0; // Reset index for reveal animation stagger

                    const createCategorySection = (catKey, items) => {
                        const filtered = items.filter(item =>
                            !searchTermLower ||
                            item.name.toLowerCase().includes(searchTermLower) ||
                            item.desc.toLowerCase().includes(searchTermLower)
                        );

                        if (filtered.length > 0) {
                            hasProducts = true;
                            const section = document.createElement('div');
                            section.className = 'mb-16';
                            const title = catKey.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                            if (category === 'all' || category === catKey) {
                                 const titleElement = document.createElement('h3');
                                 titleElement.className = 'category-title reveal'; // Add reveal class
                                 titleElement.textContent = escapeHtml(title);
                                 section.appendChild(titleElement);
                                  observeElement(titleElement); // Observe the category title
                            }

                            const grid = document.createElement('div');
                            // Updated grid classes for more columns on larger screens and adjusted gaps
                            grid.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8';
                            grid.id = `${catKey}Grid`;
                            grid.style.transformStyle = 'preserve-3d'; // Enable 3D space for cards
                            section.appendChild(grid);
                            container.appendChild(section);


                            filtered.forEach((product) => { // No need for index here, handled in createProductCard
                                const card = createProductCard(product, revealIndex++); // Pass cumulative index
                                grid.appendChild(card);
                                // observeElement is called inside createProductCard now
                            });

                        }
                    };

                    if (category === 'all') {
                        Object.entries(products).forEach(([catKey, items]) => {
                            createCategorySection(catKey, items);
                        });
                    } else if (products[category]) {
                        createCategorySection(category, products[category]);
                    }

                    if (!hasProducts) {
                        container.innerHTML = '<p class="text-center text-gray-400 py-12 text-lg">No products found matching your criteria.</p>';
                    }

                 } catch (error) {
                    console.error("Error rendering products:", error);
                    container.innerHTML = '<p class="text-center text-red-500 py-12 text-lg">Error loading products. Please try again later.</p>';
                }
            }, 50); // Small timeout
        }


        function createProductCard(product, index) { // Accept index
            const card = document.createElement("div");
            card.id = `product-${product.id}`; // Add ID for easy lookup
            card.className = "product-card reveal"; // Add reveal class
            card.setAttribute('data-product-id', product.id);
             card.setAttribute('data-index', index); // Add data-index for staggered reveal delay

            const productNameSafe = escapeHtml(product.name);
            const productDescSafe = escapeHtml(product.desc);
            const productImgSafe = escapeHtml(product.img);

            const quantity = orderItems[product.id] || 0; // Get current quantity from state

            card.innerHTML = `
                <div class="product-image-wrapper cursor-pointer">
                    <img src="${productImgSafe}" alt="${productNameSafe}" loading="lazy" class="product-img">
                </div>
                <div class="product-card-content cursor-pointer">
                    <div>
                        <h3 title="${productNameSafe}">${productNameSafe}</h3>
                        <p class="product-desc" title="${productDescSafe}">${productDescSafe ? productDescSafe.substring(0, 80) + (productDescSafe.length > 80 ? '...' : '') : ''}</p>
                        <span class="block product-price">₹${product.price}</span>
                    </div>
                </div>
                <div class="product-card-controls mt-auto">
                    ${quantity === 0
                        ? `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${product.id}">Add</button>`
                        : `
                            <div class="product-quantity-controls" data-product-id="${product.id}">
                                <button type="button" class="btn btn-secondary btn-small btn-decrease" data-product-id="${product.id}" aria-label="Decrease quantity">-</button>
                                <span class="product-quantity">${quantity}</span>
                                <button type="button" class="btn btn-secondary btn-small btn-increase" data-product-id="${product.id}" aria-label="Increase quantity">+</button>
                            </div>
                        `
                    }
                </div>
            `;

             // Add observer to this newly created card
             observeElement(card);

            return card;
        }

        // --- Order Management Functions ---
        function addItemToOrder(productId) {
            const product = findProduct(productId);
            if (!product) {
                console.error("Attempted to add non-existent product:", productId);
                return;
            }

            if (orderItems[productId]) {
                increaseQuantity(productId);
            } else {
                orderItems[productId] = 1;
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function increaseQuantity(productId) {
            const product = findProduct(productId);
             if (!product) {
                 console.error("Attempted to increase quantity for non-existent product:", productId);
                 return;
             }
            if (orderItems[productId] !== undefined) {
                orderItems[productId]++;
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            } else {
                 // This case shouldn't happen if UI is in sync with state, but handle defensively
                 addItemToOrder(productId);
            }
             console.log('Order Items:', orderItems);
        }

        function decreaseQuantity(productId) {
             const product = findProduct(productId);
             if (!product) {
                 console.error("Attempted to decrease quantity for non-existent product:", productId);
                 return;
             }
            if (orderItems[productId] !== undefined) {
                orderItems[productId]--;
                if (orderItems[productId] <= 0) {
                    delete orderItems[productId];
                }
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function updateProductCardUI(productId) {
            const card = document.getElementById(`product-${productId}`);
            if (!card) {
                 console.warn(`Product card not found for ID: ${productId}. Cannot update UI.`);
                 // This might happen if the user is on a filtered/searched view and updates an item not currently displayed
                 // We don't need to block, just log a warning. The state is still updated.
                 return;
            }

            const controlsContainer = card.querySelector('.product-card-controls');
            const quantity = orderItems[productId] || 0;

             // Create the new control HTML
             const newControlsHTML = quantity === 0
                 ? `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${productId}">Add</button>`
                 : `
                     <div class="product-quantity-controls" data-product-id="${productId}">
                         <button type="button" class="btn btn-secondary btn-small btn-decrease" data-product-id="${productId}" aria-label="Decrease quantity">-</button>
                         <span class="product-quantity">${quantity}</span>
                         <button type="button" class="btn btn-secondary btn-small btn-increase" data-product-id="${productId}" aria-label="Increase quantity">+</button>
                     </div>
                  `;

             // Check if the controls HTML actually needs updating
             if (controlsContainer.innerHTML.trim() !== newControlsHTML.trim()) {
                 // Replace the HTML
                 controlsContainer.innerHTML = newControlsHTML;
                 // Note: Event listeners need to be handled by delegation since HTML is replaced.
             } else {
                  // If the structure didn't change (e.g., quantity updated from 1 to 2), just update the quantity span
                 const quantitySpan = controlsContainer.querySelector('.product-quantity');
                 if(quantitySpan) {
                     quantitySpan.textContent = quantity;
                 }
             }
        }


        function renderOrderSummary() {
             const summaryDisplay = document.getElementById('orderSummaryDisplay');
             const hiddenSummaryInput = document.getElementById('hiddenOrderSummary');
             const formSubjectInput = document.getElementById('formSubject');
             const couponCodeInput = document.getElementById('couponCode');
             const couponFeedback = document.getElementById('couponFeedback');
             const placeOrderBtn = document.getElementById('placeOrderBtn');


             if (!summaryDisplay || !hiddenSummaryInput || !formSubjectInput || !couponCodeInput || !couponFeedback || !placeOrderBtn) {
                 console.error("One or more order summary/coupon/button elements not found.");
                 return;
             }

             const productIds = Object.keys(orderItems);
             let subtotal = 0;
             let displayHTML = '';
             let hiddenText = 'Order Summary:\n\n';

             if (productIds.length === 0) {
                 displayHTML = '<p>Add items from the collection above to see your order here.</p>';
                 hiddenText = 'Order is empty.';
                 formSubjectInput.value = 'New Order from The Highon\'s Site (Empty)';
                  couponCodeInput.disabled = true; // Disable coupon input if cart is empty
                  couponCodeInput.value = ''; // Clear coupon input if cart becomes empty
                  couponFeedback.textContent = '';
                  placeOrderBtn.disabled = true; // Disable order button
             } else {
                  couponCodeInput.disabled = false; // Enable coupon input if items are in cart
                  placeOrderBtn.disabled = false; // Enable order button

                 displayHTML += '<ul>';
                 productIds.forEach(productId => {
                     const product = findProduct(productId);
                     const quantity = orderItems[productId];
                     if (product && quantity > 0) {
                         const itemTotal = product.price * quantity;
                         subtotal += itemTotal;
                         displayHTML += `
                            <li>
                                <span class="order-item-name">${escapeHtml(product.name)}</span>
                                <span class="order-item-quantity">x ${quantity}</span>
                                <span class="order-item-price">₹${itemTotal.toFixed(2)}</span>
                            </li>
                         `;
                          hiddenText += `- ${escapeHtml(product.name)} x ${quantity} (₹${product.price.toFixed(2)} each = ₹${itemTotal.toFixed(2)})\n`;
                     }
                 });
                 displayHTML += '</ul>';

                 // Display Subtotal
                 displayHTML += `<div class="order-summary-line"><span>Subtotal:</span> <span>₹${subtotal.toFixed(2)}</span></div>`;
                 hiddenText += `\nSubtotal: ₹${subtotal.toFixed(2)}`;


                 // --- Apply Coupon Logic ---
                 let finalTotal = subtotal;
                 let priceAdjustment = 0; // Can be positive (increase) or negative (discount)
                 let feedbackMessage = '';
                 let adjustmentLineHTML = '';
                 let hiddenAdjustmentText = '';
                 let couponApplied = false;

                 const enteredCouponCode = couponCodeInput.value.trim().toUpperCase(); // Case-insensitive

                 if (enteredCouponCode) {
                     const coupon = coupons[enteredCouponCode];
                     if (coupon) {
                          couponApplied = true;
                         if (coupon.type === 'percentage_increase') {
                             priceAdjustment = subtotal * (coupon.value / 100);
                             finalTotal = subtotal + priceAdjustment;
                             feedbackMessage = `Coupon "${enteredCouponCode}" applied: +${coupon.value}% increase.`;
                             adjustmentLineHTML = `<div class="order-summary-line increase-line"><span>Coupon (${enteredCouponCode}):</span> <span>+₹${priceAdjustment.toFixed(2)}</span></div>`;
                             hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (+${coupon.value}% Increase) +₹${priceAdjustment.toFixed(2)}`;
                              couponFeedback.style.color = 'var(--danger-color)'; // Red for increase
                         } else if (coupon.type === 'percentage_discount') {
                             priceAdjustment = subtotal * (coupon.value / 100);
                             finalTotal = subtotal - priceAdjustment;
                             feedbackMessage = `Coupon "${enteredCouponCode}" applied: ${coupon.value}% off!`;
                             adjustmentLineHTML = `<div class="order-summary-line discount-line"><span>Coupon (${enteredCouponCode}):</span> <span>-₹${priceAdjustment.toFixed(2)}</span></div>`;
                             hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (-${coupon.value}% Discount) -₹${priceAdjustment.toFixed(2)}`;
                              couponFeedback.style.color = 'var(--success-color)'; // Green for discount
                         }
                         // Add logic for other coupon types (fixed discount) here if needed
                         // else if (coupon.type === 'fixed_discount') {
                         //     priceAdjustment = coupon.value;
                         //     finalTotal = subtotal - priceAdjustment;
                         //     feedbackMessage = `Coupon "${enteredCouponCode}" applied: ₹${coupon.value} off!`;
                         //     adjustmentLineHTML = `<div class="order-summary-line discount-line"><span>Coupon (${enteredCouponCode}):</span> <span>-₹${priceAdjustment.toFixed(2)}</span></div>`;
                         //     hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (₹${coupon.value} Fixed Discount) -₹${priceAdjustment.toFixed(2)}`;
                         //     couponFeedback.style.color = 'var(--success-color)'; // Green for discount
                         // }
                         else {
                             feedbackMessage = `Coupon "${enteredCouponCode}" has an unknown type.`;
                             couponApplied = false; // Mark as not applied if type is unknown
                              couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                         }
                     } else {
                         feedbackMessage = `Invalid coupon code: "${enteredCouponCode}"`;
                          couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                     }
                 } else {
                     // No coupon code entered or code was cleared
                     feedbackMessage = ''; // Clear feedback
                      couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                 }

                 // Ensure total doesn't go below zero due to fixed discounts (percentage discounts won't)
                 finalTotal = Math.max(0, finalTotal);

                 // Append adjustment line if applicable
                 if (adjustmentLineHTML) {
                     displayHTML += adjustmentLineHTML;
                 }
                 couponFeedback.textContent = feedbackMessage;
                 hiddenText += hiddenAdjustmentText;


                 // Display Final Total
                 displayHTML += `<div class="order-total">Final Total: ₹${finalTotal.toFixed(2)}</div>`;
                 hiddenText += `\nFinal Total: ₹${finalTotal.toFixed(2)}`;

                 // Update form subject with final total and coupon status
                 formSubjectInput.value = `New Order from The Highon's Site (Final ₹${finalTotal.toFixed(2)})` + (couponApplied ? ` - Coupon: ${enteredCouponCode}` : '');

             }

             summaryDisplay.innerHTML = displayHTML;
             hiddenSummaryInput.value = hiddenText;
        }

        // --- User Details Management (using localStorage) ---
        function loadUserDetails() {
            const userDetails = localStorage.getItem(USER_DETAILS_STORAGE_KEY);
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');
            const forgetButton = document.getElementById('forgetMyDetailsBtn');

            if (userDetails && nameInput && emailInput && phoneInput && addressInput && forgetButton) {
                try {
                    const parsedDetails = JSON.parse(userDetails);
                    // Populate if data exists and is not empty
                    if (parsedDetails.name || parsedDetails.email || parsedDetails.phone || parsedDetails.address) {
                        nameInput.value = parsedDetails.name || '';
                        emailInput.value = parsedDetails.email || '';
                        phoneInput.value = parsedDetails.phone || '';
                        addressInput.value = parsedDetails.address || '';
                        forgetButton.classList.remove('hidden'); // Show forget button
                    } else {
                         forgetButton.classList.add('hidden'); // Hide if data is empty object
                    }
                } catch (e) {
                    console.error("Error parsing user details from localStorage", e);
                    clearUserDetails(); // Clear invalid data
                }
            } else if (forgetButton) {
                 forgetButton.classList.add('hidden'); // Hide forget button if no data or elements missing
            }
        }

        function saveUserDetails() {
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');

            if (nameInput && emailInput && phoneInput && addressInput) {
                const userDetails = {
                    name: nameInput.value,
                    email: emailInput.value,
                    phone: phoneInput.value,
                    address: addressInput.value
                };
                 // Save only if name and email are provided (basic check)
                 if(userDetails.name && userDetails.email) {
                    try {
                         localStorage.setItem(USER_DETAILS_STORAGE_KEY, JSON.stringify(userDetails));
                         console.log("User details saved.");
                         // Show forget button after saving
                          const forgetButton = document.getElementById('forgetMyDetailsBtn');
                          if(forgetButton) forgetButton.classList.remove('hidden');
                    } catch (e) {
                         console.error("Error saving user details to localStorage:", e);
                    }
                 } else {
                     console.log("User details not saved: Name or Email missing.");
                 }
            }
        }

        function clearUserDetails() {
            localStorage.removeItem(USER_DETAILS_STORAGE_KEY);
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');
             const forgetButton = document.getElementById('forgetMyDetailsBtn');


            if (nameInput) nameInput.value = '';
            if (emailInput) emailInput.value = '';
            if (phoneInput) phoneInput.value = '';
            if (addressInput) addressInput.value = '';
            if (forgetButton) forgetButton.classList.add('hidden');

            console.log("User details cleared.");
        }


        // --- UI Interaction Functions ---

        function showModal(productId) {
           try {
                const product = findProduct(productId);
                if (!product) {
                    console.error("Product not found for modal:", productId);
                    return;
                }

                const modalImg = document.getElementById('modalImg');
                const modalName = document.getElementById('modalName');
                const modalDesc = document.getElementById('modalDesc');
                const modalPrice = document.getElementById('modalPrice');
                const productModal = document.getElementById('productModal');

                if (!modalImg || !modalName || !modalDesc || !modalPrice || !productModal) {
                     console.error("Modal elements missing!");
                     return;
                }

                modalImg.src = escapeHtml(product.img);
                modalImg.alt = escapeHtml(product.name);
                modalName.textContent = escapeHtml(product.name);
                modalDesc.textContent = escapeHtml(product.desc);
                modalPrice.textContent = `₹${product.price}`;

                productModal.classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Prevent body scroll

           } catch (error) {
                console.error("Error showing modal:", error);
                closeModal();
           }
        }

        function closeModal() {
          const productModal = document.getElementById('productModal');
          if (productModal) {
            productModal.classList.add('hidden');
          }
          document.body.classList.remove('overflow-hidden'); // Re-enable body scroll
        }

        function toggleMobileMenu() {
          const mobileMenu = document.getElementById('mobileMenu');
          if (mobileMenu) {
            mobileMenu.classList.toggle('hidden');
          }
        }


        // --- Scroll Animation Observer ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const target = entry.target;
                    // Get index for stagger only for product cards
                    const index = target.classList.contains('product-card') ? parseInt(target.getAttribute('data-index'), 10) : 0;
                    const delay = index * 50; // 50ms delay per card

                    // Apply the calculated delay using CSS variable
                    target.style.setProperty('--reveal-delay', `${delay}ms`);

                    // Add the visible class to trigger the animation
                    target.classList.add('visible');

                    // Optional: unobserve after revealing to save resources if element won't be hidden again
                     // For one-time reveal on scroll down:
                    if (!target.classList.contains('animate__animated')) { // Don't unobserve animate.css elements
                         observer.unobserve(entry.target);
                    }
                } else {
                     // Optional: remove visible class and reset delay if you want elements to re-animate on scroll back up
                     // target.classList.remove('visible');
                     // target.style.setProperty('--reveal-delay', '0s'); // Reset delay when not intersecting
                }
            });
        }, {
            threshold: 0.1 // Trigger when 10% of the element is visible
        });

        // Function to add element to observer
        function observeElement(element) {
            if (element && !element.classList.contains('visible')) { // Only observe if not already visible
                 // Reset initial state before observing
                 element.classList.remove('visible');
                 element.style.setProperty('--reveal-delay', '0s'); // Reset delay
                 observer.observe(element);
            }
        }


        // --- Parallax Effect ---
        // This will add a subtle parallax to elements based on scroll position
        // Adjust multiplier for intensity

        function applyParallax() {
            const heroShapes = document.querySelector('.hero-shapes');
            const productsContainer = document.getElementById('productsContainer'); // The wrapper containing grids/loader

            if (!heroShapes && !productsContainer) return;

            let rafId = null;

            const updateParallax = () => {
                const currentScroll = window.scrollY;

                // Parallax for Hero Shapes (move slightly against scroll)
                if (heroShapes) {
                    const heroRect = heroShapes.closest('section').getBoundingClientRect();
                    // Apply effect only when hero section is somewhat in view
                     if (heroRect.top < window.innerHeight && heroRect.bottom > 0) {
                        const translateY = -currentScroll * 0.1; // 10% of scroll
                        heroShapes.style.transform = `translateY(${translateY}px) translateZ(-50px)`; // Maintain original translateZ
                     }
                }

                // Parallax for Products Grid Container (move slightly with scroll, giving foreground feel)
                 if (productsContainer) {
                    const productsRect = productsContainer.closest('section').getBoundingClientRect();
                     // Apply effect when products section is in view
                     if (productsRect.top < window.innerHeight && productsRect.bottom > 0) {
                         // Calculate offset based on distance from viewport top, subtle effect
                         const sectionScroll = currentScroll - (productsContainer.closest('section').offsetTop - window.innerHeight);
                         const translateY = Math.max(0, sectionScroll) * 0.05; // 5% of scroll, capped at 0
                         productsContainer.style.transform = `translateY(${translateY}px)`; // Apply translateY for parallax
                     } else {
                          productsContainer.style.transform = `translateY(0px)`; // Reset transform when out of view
                     }
                 }

                rafId = requestAnimationFrame(updateParallax);
            };

            const startParallax = () => {
                if (!rafId) {
                    updateParallax(); // Initial update
                }
            };

            const stopParallax = () => {
                if (rafId) {
                    cancelAnimationFrame(rafId);
                    rafId = null;
                }
            };

            // Start/stop parallax on scroll
            window.addEventListener('scroll', startParallax);
             // Also update on load and resize in case elements are already in view
             window.addEventListener('load', updateParallax);
             window.addEventListener('resize', updateParallax);

             // Initial call
             updateParallax();
        }


        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
          try {
              // Set footer year
              const footerYear = document.getElementById('footerYear');
              if (footerYear) footerYear.textContent = new Date().getFullYear();

              // Load cart and user details from local storage
              loadCart();
              loadUserDetails();

              // Initial render of products and order summary based on loaded cart
              renderProducts('all', '');
              renderOrderSummary();


              // --- Event Listeners Setup ---

              // Product Search Input
              const productSearchInput = document.getElementById('productSearch');
              if (productSearchInput) {
                   let searchTimeout;
                   productSearchInput.addEventListener('input', function() {
                       clearTimeout(searchTimeout);
                       const searchTerm = this.value;
                       searchTimeout = setTimeout(() => {
                           // When rendering products after search/filter, re-observe all new/remaining elements
                           renderProducts(currentCategoryFilter, searchTerm);
                       }, 300); // Slightly longer debounce
                   });
              } else { console.error("Product search input not found."); }

              // Category Filter Select
              const categoryFilterSelect = document.getElementById('categoryFilter');
              if (categoryFilterSelect) {
                   categoryFilterSelect.addEventListener('change', function() {
                      const searchVal = document.getElementById('productSearch')?.value || '';
                       // When rendering products after search/filter, re-observe all new/remaining elements
                      renderProducts(this.value, searchVal);
                   });
              } else { console.error("Category filter select not found."); }

               // Modal close on background click
               const productModal = document.getElementById('productModal');
               if (productModal) {
                   productModal.addEventListener('click', (event) => {
                       // Check if the click was directly on the backdrop (the modal container itself)
                       if (event.target === productModal) {
                           closeModal();
                       }
                   });
               }

               // --- Event Delegation for Product Card Controls and Modal Trigger ---
               const productsContainer = document.getElementById('productsContainer');
               if (productsContainer) {
                   productsContainer.addEventListener('click', (event) => {
                       const target = event.target;
                       // Find the closest product card element to get the product ID
                       const productCard = target.closest('.product-card');
                       const productId = productCard?.getAttribute('data-product-id');

                       if (!productId) return; // Not inside a product card or product ID missing

                       // Check if the click was on a specific button class
                       if (target.classList.contains('btn-add')) {
                           addItemToOrder(productId);
                       } else if (target.classList.contains('btn-increase')) {
                           increaseQuantity(productId);
                       } else if (target.classList.contains('btn-decrease')) {
                           decreaseQuantity(productId);
                       } else {
                           // If not a quantity button, assume click is for modal if within card content/image
                           // Check if the click target or its closest parent is specifically the image wrapper or content area,
                           // NOT the controls area itself.
                           const clickedArea = target.closest('.product-image-wrapper') || (target.closest('.product-card-content') && !target.closest('.product-card-controls'));
                           if(clickedArea) {
                                showModal(productId);
                           }
                       }
                   });
               } else { console.error("productsContainer not found for event delegation."); }

                // --- Coupon Input Listener ---
                const couponCodeInput = document.getElementById('couponCode');
                if (couponCodeInput) {
                    couponCodeInput.addEventListener('input', renderOrderSummary); // Update summary on input change
                } else { console.error("Coupon code input not found."); }


               // --- Order Form Submission Listener ---
               const orderForm = document.getElementById('orderForm');
               if (orderForm) {
                   orderForm.addEventListener('submit', function(event) {
                       // Basic validation: Check if any items are in the order
                       if (Object.keys(orderItems).length === 0) {
                            alert("Your order list is empty. Please add items from the collection before placing an order.");
                            event.preventDefault(); // Prevent form submission
                            return; // Stop here if order is empty
                       }

                        // Save user details before submitting
                       saveUserDetails();

                       // Ensure the hidden order summary is populated just before submitting
                       // This also re-calculates based on the final coupon input value
                       renderOrderSummary();

                       // Optional: Disable the submit button to prevent double clicks
                       const submitButton = orderForm.querySelector('button[type="submit"]');
                       if(submitButton) {
                           submitButton.disabled = true;
                           submitButton.textContent = 'Placing Order...';
                       }
                       // FormSubmit.co handles the actual AJAX submission or page redirect
                   });
               } else { console.error("Order form not found."); }

                // --- Forget My Details Button Listener ---
                const forgetButton = document.getElementById('forgetMyDetailsBtn');
                if(forgetButton) {
                    forgetButton.addEventListener('click', clearUserDetails);
                }


               // Observe elements with 'reveal' class initially present in HTML (non-product cards)
                document.querySelectorAll('.reveal').forEach(el => {
                    // Product cards are observed individually in createProductCard
                    if (!el.classList.contains('product-card') && !el.classList.contains('category-title')) {
                       observeElement(el);
                    }
                });

                // Observe category titles already in the HTML (if not dynamically added)
                 document.querySelectorAll('.category-title.reveal').forEach(el => {
                     observeElement(el);
                 });


              // Start parallax effect
              applyParallax();


          } catch (error) {
               console.error("Critical error during DOMContentLoaded initialization:", error);
               // Use a more robust error display
               const errorDiv = document.createElement('div');
               errorDiv.style.cssText = "padding: 40px; text-align: center; font-family: sans-serif; color: white; background-color: #333; margin: 20px; border-radius: 8px;";
               errorDiv.innerHTML = `<h1>Oops!</h1><p>Something went wrong while loading the page content.</p><p>Please <a href="javascript:location.reload();" style="color: #7f5af0; text-decoration: underline;">refresh</a> and try again.</p><p style="font-size: 0.8em; color: #94a1b2;">Error details: ${escapeHtml(error.message)}</p>`;
               document.body.innerHTML = ''; // Clear existing body content
               document.body.appendChild(errorDiv);
          }
        });
    </script>

</body>
</html>
