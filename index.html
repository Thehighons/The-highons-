<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="The Highon's - Premium creative supplies including keychains, art supplies, stationery, gadgets, and diaries available for inquiry in Navsari.">
    <title>The Highon's - Premium Creative Supplies | Navsari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        @font-face {
          font-family: 'Trajan Pro';
          /* src: url('trajan-pro.woff2') format('woff2'), url('trajan-pro.woff') format('woff'); */
          font-display: swap; /* Improves perceived performance */
        }
        :root {
          --bg-dark: #16161a; /* Off Black/Deep Indigo */
          --text-main: #fffffe; /* Off White */
          --text-secondary: #94a1b2; /* Greyish Blue */
          --primary-accent: #7f5af0; /* Vibrant Violet */
          --secondary-accent: #2cb67d; /* Emerald Green */
          --card-bg: #242629; /* Dark Grey */
          --border-color: rgba(148, 161, 178, 0.2); /* Subtle border based on text-secondary */
        }

        /* Smooth Scrolling */
        html {
          scroll-behavior: smooth;
        }

        body {
          font-family: 'Montserrat', sans-serif;
          background-color: var(--bg-dark);
          color: var(--text-main);
          overflow-x: hidden; /* Prevent horizontal scroll */
        }
        /* Prevent body scroll when modal is open */
        body.overflow-hidden {
            overflow: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
          font-family: 'Playfair Display', serif;
          color: var(--text-main);
          font-weight: 600;
        }
        .brand-name {
          font-family: 'Trajan Pro', 'Times New Roman', serif; /* Added fallback */
          letter-spacing: 1.5px;
          color: var(--text-main);
          font-weight: bold;
        }

        /* Header Styling */
        header {
          background-color: rgba(22, 22, 26, 0.8); /* Slightly transparent dark bg */
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-color);
        }

        /* Navigation Links */
        .nav-link {
          position: relative;
          color: var(--text-secondary);
          transition: all 0.3s ease;
          padding: 0.5rem 0.25rem;
          font-weight: 500;
        }
        .nav-link:hover {
          color: var(--text-main);
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--primary-accent); /* Use accent color */
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        .nav-link:hover::after {
            width: 70%; /* Underline effect */
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            overflow: hidden;
            background: radial-gradient(ellipse at bottom, var(--bg-dark) 0%, #1a1a2e 100%);
        }
        /* Animated background shapes (Example) */
        .hero-shapes div {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-accent), var(--secondary-accent));
            opacity: 0.1;
            animation: drift 20s infinite linear alternate;
        }
        .hero-shapes div:nth-child(1) { width: 150px; height: 150px; top: 10%; left: 15%; animation-duration: 22s;}
        .hero-shapes div:nth-child(2) { width: 80px; height: 80px; top: 70%; left: 80%; animation-duration: 18s; animation-delay: 2s;}
        .hero-shapes div:nth-child(3) { width: 120px; height: 120px; top: 40%; left: 50%; animation-duration: 25s; animation-delay: 4s;}

        @keyframes drift {
            from { transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); }
            to { transform: translateY(20px) translateX(-15px) rotate(30deg) scale(1.1); }
        }

        /* Buttons */
        .btn {
            display: inline-flex; /* Changed to flex for centering content */
            align-items: center; /* Center text vertically */
            justify-content: center; /* Center text horizontally */
            padding: 0.8rem 2rem;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            border: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            white-space: nowrap; /* Prevent text wrapping */
        }
        .btn::before { /* Subtle shine effect on hover */
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.6s ease;
            z-index: -1;
        }
        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-accent) 0%, #a787ff 100%); /* Violet gradient */
            color: var(--text-main);
            box-shadow: 0 4px 15px rgba(127, 90, 240, 0.3);
        }
        .btn-primary:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 6px 20px rgba(127, 90, 240, 0.4);
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--primary-accent);
            border: 2px solid var(--primary-accent);
        }
        .btn-secondary:hover {
            background-color: rgba(127, 90, 240, 0.1);
            transform: translateY(-2px);
        }

         /* Small buttons for quantity control */
         .btn-small {
             padding: 0.3rem 0.8rem; /* Reduced padding */
             font-size: 0.9rem; /* Smaller font */
             border-radius: 9999px; /* Fully rounded */
         }


        /* Product Section */
         #products {
            background: linear-gradient(to bottom, var(--bg-dark), #1a1a2e); /* Gradient background */
            position: relative;
            padding-top: 8rem;
            padding-bottom: 8rem;
         }
         #products::before { /* Top separator glow */
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100px;
            background: linear-gradient(to bottom, rgba(22, 22, 26, 0), rgba(127, 90, 240, 0.1));
            pointer-events: none;
         }

        .category-title {
            background: linear-gradient(135deg, var(--primary-accent) 0%, var(--secondary-accent) 100%);
            color: var(--text-main);
            padding: 12px 32px;
            border-radius: 8px;
            display: inline-block;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(44, 182, 125, 0.2); /* Adjusted shadow */
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
        }

        /* Redesigned Product Card */
        .product-card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px; /* More rounded */
            overflow: hidden;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Bouncier transition */
            position: relative;
            transform-style: preserve-3d; /* For tilt effect */
            box-shadow: 0 5px 15px rgba(0,0,0, 0.2);
            display: flex; /* Use flex to space content and controls */
            flex-direction: column;
            justify-content: space-between; /* Push controls to bottom */
        }
        .product-card:hover {
            transform: translateY(-10px) rotateX(3deg) rotateY(-2deg); /* Slight tilt effect */
            box-shadow: 0 15px 30px rgba(0,0,0, 0.3);
            border-color: rgba(127, 90, 240, 0.5); /* Accent border on hover */
        }
         .product-card::after { /* Subtle glow effect */
             content: '';
             position: absolute;
             inset: -1px;
             background: radial-gradient(ellipse at center, rgba(127, 90, 240, 0.2), transparent 70%);
             opacity: 0;
             transition: opacity 0.4s ease;
             z-index: -1;
             border-radius: 16px;
         }
         .product-card:hover::after {
             opacity: 1;
         }

        .product-image-wrapper {
            height: 200px; /* Fixed height */
            background-color: rgba(255, 255, 255, 0.05); /* Slightly lighter bg for image */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
        }
        .product-image-wrapper img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform 0.4s ease;
        }
        .product-card:hover .product-image-wrapper img {
            transform: scale(1.08);
        }

        .product-card-content {
            padding: 1.25rem; /* Increased padding */
            text-align: center; /* Center content */
            flex-grow: 1; /* Allow content to take space */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* Align text to top */
        }
        .product-card h3 {
            font-family: 'Montserrat', sans-serif; /* Use body font for card title */
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-main);
            min-height: 2.8em; /* Ensure consistent height over two lines */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }
         .product-card p.product-desc {
             font-size: 0.85rem;
             color: var(--text-secondary);
             margin-bottom: 1rem;
             min-height: 3.4em; /* Ensure consistent height over multiple lines */
             display: -webkit-box;
             -webkit-line-clamp: 3;
             -webkit-box-orient: vertical;
             overflow: hidden;
             text-overflow: ellipsis;
         }
        .product-card .product-price {
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--primary-accent); /* Accent color for price */
            margin-bottom: 1.25rem;
        }
        /* Product Controls - Centered at the bottom */
        .product-card-controls {
            padding: 0 1.25rem 1.25rem; /* Padding bottom matches content */
            display: flex;
            justify-content: center; /* Center buttons */
            align-items: center;
            width: 100%;
        }

        .product-quantity-controls {
             display: flex;
             align-items: center;
             gap: 0.5rem; /* Space between buttons and quantity */
        }
         .product-quantity {
             font-size: 1.1rem;
             font-weight: 700;
             color: var(--text-main);
             min-width: 30px; /* Ensure width for 1, 10, etc */
             text-align: center;
         }

        /* Filter/Search Styling */
        #productSearch, #categoryFilter {
            background-color: var(--card-bg);
            color: var(--text-main);
            border: 1px solid var(--border-color);
            border-radius: 50px; /* Pill shape */
            padding: 0.8rem 1.5rem;
            transition: all 0.3s ease;
        }
         #productSearch::placeholder {
             color: var(--text-secondary);
             opacity: 0.8;
         }
        #productSearch { padding-left: 3rem; } /* Space for icon */
        #categoryFilter {
          appearance: none;
          background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%2394a1b2"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>');
          background-repeat: no-repeat;
          background-position: right 1rem center;
          background-size: 1em 1em;
          padding-right: 3rem;
        }
         #categoryFilter option {
             background-color: var(--card-bg);
             color: var(--text-main);
         }

        #productSearch:focus, #categoryFilter:focus {
             border-color: var(--primary-accent);
             box-shadow: 0 0 0 2px rgba(127, 90, 240, 0.3);
             outline: none;
        }
        .search-icon { color: var(--text-secondary); }

        /* Form Styling */
        .form-section {
            background-color: var(--bg-dark); /* Match body bg */
            position: relative;
            overflow: hidden;
        }
        .form-section::before { /* Aurora effect background */
             content: "";
             position: absolute;
             inset: 0;
             background: radial-gradient(circle at 30% 20%, rgba(127, 90, 240, 0.15) 0%, transparent 40%),
                         radial-gradient(circle at 70% 80%, rgba(44, 182, 125, 0.1) 0%, transparent 40%);
             filter: blur(50px);
             z-index: 0;
        }

        .form-container {
            background-color: rgba(36, 38, 41, 0.8); /* Semi-transparent card bg */
            backdrop-filter: blur(5px);
             -webkit-backdrop-filter: blur(5px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 2rem;
            position: relative; /* To stay above the ::before */
            z-index: 1;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }
        .form-container label {
             color: var(--text-secondary);
             font-weight: 500;
             font-size: 0.9rem;
             margin-bottom: 0.5rem;
             display: block;
        }
        .form-container input[type="text"],
        .form-container input[type="email"],
        .form-container input[type="tel"],
        .form-container textarea,
        .form-container select {
            background-color: rgba(22, 22, 26, 0.7); /* Darker input bg */
            border: 1px solid var(--border-color);
            color: var(--text-main);
            border-radius: 8px;
            padding: 0.9rem 1rem;
             width: 100%;
             transition: all 0.3s ease;
        }
        .form-container input::placeholder,
        .form-container textarea::placeholder {
            color: rgba(148, 161, 178, 0.6); /* Lighter placeholder */
        }
        .form-container input:focus,
        .form-container textarea:focus,
        .form-container select:focus {
            border-color: var(--primary-accent);
            background-color: rgba(22, 22, 26, 0.9);
             box-shadow: 0 0 0 2px rgba(127, 90, 240, 0.3);
             outline: none;
        }
         .form-container select option {
             background-color: var(--bg-dark);
             color: var(--text-main);
         }

        /* Order Summary Display */
         #orderSummaryDisplay {
             background-color: rgba(22, 22, 26, 0.7);
             border: 1px solid var(--border-color);
             border-radius: 8px;
             padding: 1rem;
             margin-bottom: 1.5rem;
             min-height: 80px; /* Give it some minimum space */
             color: var(--text-main);
         }
         #orderSummaryDisplay p {
             color: var(--text-secondary);
             text-align: center;
         }
         #orderSummaryDisplay ul {
             list-style: none;
             padding: 0;
             margin: 0;
         }
         #orderSummaryDisplay li {
             padding: 0.5rem 0;
             border-bottom: 1px dashed rgba(148, 161, 178, 0.1);
         }
         #orderSummaryDisplay li:last-child {
             border-bottom: none;
         }
         #orderSummaryDisplay .order-item-name {
             font-weight: 600;
             color: var(--text-main);
         }
         #orderSummaryDisplay .order-total {
              font-size: 1.2rem;
              font-weight: 700;
              color: var(--secondary-accent);
              margin-top: 1rem;
              text-align: right;
              padding-top: 0.5rem;
              border-top: 1px solid var(--border-color);
         }


        /* Contact Section */
        #contact {
            background-color: var(--card-bg); /* Use card bg for contrast */
        }
        .contact-info-box {
             background-color: rgba(22, 22, 26, 0.8); /* Darker box */
             border: 1px solid var(--border-color);
             border-radius: 12px;
             padding: 2rem;
             transition: all 0.3s ease;
        }
        .contact-info-box:hover {
             border-color: var(--primary-accent);
             transform: translateY(-5px);
             box-shadow: 0 8px 20px rgba(0,0,0,0.25);
        }
        .contact-info-box a {
            color: var(--primary-accent);
            transition: color 0.3s ease;
            word-break: break-all; /* Allow long email to break line */
        }
        .contact-info-box a:hover {
            color: var(--secondary-accent);
        }
        .social-icons a {
            color: var(--text-secondary);
            font-size: 1.75rem; /* Larger icons */
            transition: all 0.3s ease;
        }
        .social-icons a:hover {
             color: var(--primary-accent);
             transform: scale(1.1) rotate(-5deg);
        }

        /* Footer */
        footer {
            background-color: var(--bg-dark);
            border-top: 1px solid var(--border-color);
        }
        footer .brand-name { color: var(--text-main); }
        footer a { color: var(--text-secondary); transition: color 0.3s ease; }
        footer a:hover { color: var(--primary-accent); }
        footer .text-gray-500 { color: var(--text-secondary); opacity: 0.7; }

        /* Modal Styling */
        .modal-backdrop {
             background-color: rgba(22, 22, 26, 0.7); /* Dark backdrop */
             backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        .modal-content {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-main);
             box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }
        .modal-content img { border-radius: 8px; background-color: rgba(255,255,255,0.05); }
        .modal-content h3 { color: var(--text-main); }
        .modal-content p { color: var(--text-secondary); }
        .modal-content .modal-price { color: var(--primary-accent); font-size: 1.8rem; font-weight: 700;}
        .modal-close-btn {
            color: var(--text-secondary);
            transition: all 0.3s ease;
        }
        .modal-close-btn:hover {
             color: var(--text-main);
             transform: rotate(90deg);
        }

        /* Loader */
        .loader {
          border: 4px solid rgba(148, 161, 178, 0.2); /* Lighter grey border */
          border-top: 4px solid var(--primary-accent); /* Accent color spinner */
          border-radius: 50%;
          width: 50px;
          height: 50px;
          animation: spin 1s linear infinite;
          margin: 80px auto;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        /* Animation Utilities */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Order Form Styling */
        #orderFormContainer {
             background-color: var(--card-bg);
             border: 1px solid var(--border-color);
             border-radius: 16px;
             padding: 2rem;
             position: relative;
             z-index: 1;
             box-shadow: 0 10px 25px rgba(0,0,0,0.3);
             max-width: 600px;
             margin: 0 auto;
        }
         #orderFormContainer label {
             color: var(--text-secondary);
             font-weight: 500;
             font-size: 0.9rem;
             margin-bottom: 0.5rem;
             display: block;
         }
         #orderFormContainer input[type="text"],
         #orderFormContainer input[type="email"],
         #orderFormContainer input[type="tel"],
         #orderFormContainer textarea, /* Keep textarea for potential additional notes */
         #orderFormContainer select {
             background-color: rgba(22, 22, 26, 0.7);
             border: 1px solid var(--border-color);
             color: var(--text-main);
             border-radius: 8px;
             padding: 0.9rem 1rem;
             width: 100%;
             transition: all 0.3s ease;
         }
         #orderFormContainer input::placeholder,
         #orderFormContainer textarea::placeholder {
             color: rgba(148, 161, 178, 0.6);
         }
         #orderFormContainer input:focus,
         #orderFormContainer textarea:focus,
         #orderFormContainer select:focus {
             border-color: var(--primary-accent);
             background-color: rgba(22, 22, 26, 0.9);
             box-shadow: 0 0 0 2px rgba(127, 90, 240, 0.3);
             outline: none;
         }
          #orderFormContainer select option {
              background-color: var(--bg-dark);
              color: var(--text-main);
          }
         #orderFormContainer .btn-primary {
             margin-top: 1rem;
         }

        /* Adjust product grid for 2 columns */
        #productsContainer .grid {
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); /* Adjust minmax as needed */
            gap: 2rem; /* Adjust gap as needed */
        }


    </style>
</head>
<body class="flex flex-col min-h-screen">

    <header class="sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between p-4">
            <div class="flex items-center">
                <a href="#" class="text-2xl tracking-wide brand-name">THE HIGHON'S</a>
            </div>
            <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
                <a href="#products" class="nav-link">Products</a>
                <a href="#order" class="nav-link">Place Order</a>
                <a href="#request" class="nav-link">Request Product</a>
                <a href="#contact" class="nav-link">Contact</a>
            </nav>
            <div class="md:hidden flex items-center">
                <button onclick="toggleMobileMenu()" class="text-gray-300 hover:text-white focus:outline-none" aria-label="Toggle mobile menu">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-gradient-to-b from-[rgba(36,38,41,0.9)] to-[rgba(22,22,26,0.9)] backdrop-blur-sm border-t border-[rgba(148,161,178,0.2)] p-4 absolute w-full shadow-lg">
            <div class="flex flex-col items-center space-y-4">
                <a href="#products" class="nav-link block py-2" onclick="toggleMobileMenu()">Products</a>
                <a href="#order" class="nav-link block py-2" onclick="toggleMobileMenu()">Place Order</a>
                <a href="#request" class="nav-link block py-2" onclick="toggleMobileMenu()">Request Product</a>
                <a href="#contact" class="nav-link block py-2" onclick="toggleMobileMenu()">Contact</a>
            </div>
        </div>
    </header>

    <section class="hero-section text-center pt-28 pb-20 md:pt-36 md:pb-28 relative">
        <div class="hero-shapes absolute inset-0 z-0">
            <div></div> <div></div> <div></div>
        </div>

        <div class="max-w-4xl mx-auto px-6 relative z-10">
             <img src="GridArt_20250425_064014157.png" alt="The Highon's Logo" class="w-36 sm:w-44 mx-auto mb-8 animate__animated animate__fadeInDown" loading="lazy">

            <h1 class="text-4xl md:text-6xl font-bold mb-6 animate__animated animate__fadeInUp">
                Ignite Your <span class="bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-emerald-400">Creativity</span>.
            </h1>
            <p class="text-lg md:text-xl mb-10 text-gray-300 max-w-2xl mx-auto animate__animated animate__fadeInUp animate__delay-1s">
                Discover premium supplies in Navsari. Explore keychains, art materials, stationery, and more.
            </p>
            <a href="#products" class="btn btn-primary text-lg px-10 py-4 animate__animated animate__fadeInUp animate__delay-2s">
                Explore Collection
            </a>
        </div>
         <div class="mt-20 flex justify-center space-x-5 sm:space-x-8 opacity-80">
           <img src="Screenshot_20250422_132243_Meesho.jpg" alt="Keychain product" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-purple-500/50 animate__animated animate__fadeIn animate__delay-3s" loading="lazy">
           <img src="Screenshot_20250424_134214_Meesho.jpg" alt="Art supplies" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-emerald-500/50 animate__animated animate__fadeIn animate__delay-4s" loading="lazy" style="animation-delay: 0.4s;">
           <img src="81EROqfMQBL._AC_UF1000,1000_QL80_.jpg" alt="Diary product" class="w-24 h-24 sm:w-32 sm:h-32 rounded-full object-cover shadow-lg border-2 border-purple-500/50 animate__animated animate__fadeIn animate__delay-5s" loading="lazy" style="animation-delay: 0.8s;">
         </div>
    </section>

    <section id="products" class="py-20 px-6">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center reveal">Our Collection</h2>
            <div class="flex flex-col md:flex-row justify-between items-center mb-16 gap-6 reveal">
                <div class="relative w-full md:w-2/5 lg:w-1/3">
                    <input type="text" id="productSearch" placeholder="Search products..." class="w-full" aria-label="Search products">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 search-icon"></i>
                </div>
                <div class="filter-selector text-center md:text-right w-full md:w-auto">
                    <label for="categoryFilter" class="mr-2 font-semibold text-gray-400">Filter:</label>
                    <select id="categoryFilter" class="" aria-label="Select product category">
                        <option value="all">All Products</option>
                        <option value="keychains">Keychains</option>
                        <option value="artSupplies">Art Supplies</option>
                        <option value="stationery">Stationery</option>
                        <option value="diaries">Diaries</option>
                        <option value="gadgets">Gadgets</option>
                    </select>
                </div>
            </div>
            <div id="productsContainer" class="relative min-h-[300px]">
                 <div class="loader"></div>
            </div>
        </div>
    </section>

     <section id="order" class="py-20 px-6 form-section">
        <div class="max-w-3xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Place Your Order</h2>
            <div id="orderFormContainer" class="text-left">
                <p class="text-gray-400 mb-6">Items added from the 'Our Collection' section will appear below. Fill in your details to place your order for delivery within Navsari (PIN: 396445).</p>

                <div>
                     <label class="mb-2 block text-secondary">Your Order Summary</label>
                     <div id="orderSummaryDisplay">
                         <p>Add items from the collection above to see your order here.</p>
                     </div>
                </div>


                <form id="orderForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                     <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-order.html">
                     <input type="hidden" name="_captcha" value="false">
                     <input type="hidden" name="_subject" id="formSubject" value="New Order from The Highon's Site!">
                     <input type="hidden" name="Order Summary" id="hiddenOrderSummary" value="">
                      <div>
                        <label for="orderNotes">Additional Notes (Optional)</label>
                         <textarea id="orderNotes" name="Additional Notes" rows="3" placeholder="Any specific instructions or details?" aria-label="Additional notes for order"></textarea>
                    </div>

                    <div>
                        <label for="orderName">Full Name</label>
                        <input type="text" id="orderName" name="name" placeholder="Enter your full name" required aria-label="Full Name for order">
                    </div>
                    <div>
                        <label for="orderEmail">Email</label>
                        <input type="email" id="orderEmail" name="email" placeholder="Enter your email" required aria-label="Email Address for order">
                    </div>
                     <div>
                        <label for="orderPhone">Phone (+91)</label>
                         <input type="tel" id="orderPhone" name="phone" placeholder="Enter 10-digit number" required pattern="[6-9]\d{9}" title="Please enter a valid 10-digit Indian mobile number (starting with 6, 7, 8, or 9)" aria-label="Phone number for order (starts with 6-9, 10 digits)">
                    </div>
                    <div>
                        <label for="orderAddress">Full Address (Navsari)</label>
                        <input type="text" id="orderAddress" name="address" placeholder="House No, Street, Area, Navsari - 396445" required aria-label="Full Address for order">
                    </div>

                    <div>
                        <label for="orderPayment">Payment Option</label>
                        <select id="orderPayment" name="payment" class="w-full" aria-label="Payment option">
                            <option value="COD">Cash on Delivery</option>
                            <option value="UPI">UPI Payment</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-full">Place Order</button>
                </form>
            </div>
        </div>
    </section>


    <section id="request" class="py-20 px-6 form-section">
        <div class="max-w-2xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Request a Product</h2>
            <p class="text-gray-400 mb-8 max-w-xl mx-auto">Can't find what you're looking for? Let us know, and we'll try our best to source it for you!</p>
            <div class="form-container">
                <form id="requestForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                    <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-request.html">
                    <input type="hidden" name="_subject" value="New Product Request from The Highon's Site">
                    <input type="hidden" name="_captcha" value="false">
                    <div>
                        <label for="requestName">Product Name</label>
                        <input type="text" id="requestName" name="product" placeholder="e.g., Specific brand watercolor set" required aria-label="Product name for request">
                    </div>
                    <div>
                        <label for="requestDetails">Additional Details (Optional)</label>
                        <textarea id="requestDetails" name="details" rows="4" placeholder="Brand, color, size, quantity, etc." aria-label="Additional details for product request"></textarea>
                    </div>
                    <div>
                        <label for="requestEmail">Your Email</label>
                        <input type="email" id="requestEmail" name="email" placeholder="your.email@example.com" required aria-label="Your email address for request">
                    </div>
                    <button type="submit" class="btn btn-primary w-full mt-4">Submit Request</button>
                </form>
            </div>
        </div>
    </section>

    <section id="contact" class="py-20 text-center px-6">
        <div class="max-w-4xl mx-auto reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Get In Touch</h2>
            <div class="grid grid-cols-1 gap-8 text-left">
                <div class="contact-info-box">
                    <h3 class="text-2xl font-semibold mb-6 text-center">Contact Information</h3>
                    <div class="space-y-4 text-center text-lg">
                        <p><span class="font-medium text-gray-400">Email:</span> <a href="mailto:thehighonsofficial@gmail.com">thehighonsofficial@gmail.com</a></p>
                        <p><span class="font-medium text-gray-400">Location:</span> Navsari, Gujarat - 396445</p>
                         <p class="text-sm text-gray-500">(Online orders via this site for local delivery only)</p>
                    </div>
                    <div class="flex justify-center space-x-6 mt-8 social-icons">
                        <a href="https://instagram.com/thehighons" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-10 mt-auto">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-6">
                <div>
                    <span class="text-2xl font-bold tracking-wide brand-name">THE HIGHON'S</span>
                    <p class="mt-1 text-sm text-gray-400">Premium Creative Supplies - Navsari</p>
                </div>
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 text-sm">
                    <a href="#products">Products</a>
                    <a href="#order">Place Order</a>
                    <a href="#request">Request</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500 text-xs">
                <p> &copy; <span id="footerYear"></span> The Highon's. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <div id="productModal" class="fixed inset-0 z-[70] modal-backdrop flex items-center justify-center hidden p-4">
        <div class="modal-content relative max-w-lg w-full mx-auto animate__animated animate__zoomIn animate__faster overflow-hidden">
             <button onclick="closeModal()" class="modal-close-btn absolute top-4 right-4 text-3xl leading-none z-10" aria-label="Close product details modal">&times;</button>
             <div class="p-6 sm:p-8 max-h-[80vh] overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <img id="modalImg" src="" alt="" class="w-full h-64 md:h-full object-contain p-2" loading="lazy">
                    <div class="flex flex-col justify-center">
                        <h3 id="modalName" class="text-2xl lg:text-3xl font-bold mb-3"></h3>
                        <p id="modalDesc" class="text-sm lg:text-base mb-5"></p>
                        <p id="modalPrice" class="modal-price mb-6"></p>
                        <p class="text-sm text-gray-400">To order this item, please go to the <a href="#products" onclick="closeModal()" class="text-purple-400 hover:text-emerald-400 underline">Our Collection section</a> and click 'Add' on the product card.</p>
                    </div>
                </div>
             </div>
        </div>
    </div>

    <script>
        // --- Constants ---
        // Removed cart/coupon constants

        // --- Product Data ---
        const products = {
             keychains: [
                { id: "kc001", name: "Thor Loki Keychain", price: 99, img: "Screenshot_20250422_132243_Meesho.jpg", desc: "High-quality metal keychain featuring Thor and Loki designs" },
                { id: "kc002", name: "Thor Hammer Keychain", price: 89, img: "Screenshot_20250422_131740_Meesho.jpg", desc: "Durable Mjolnir keychain with detailed engraving" },
                { id: "kc003", name: "Demon slayer katana keychain", price: 159, img: "Screenshot_20250424_141150_Meesho.jpg", desc: "Miniature katana keychain from Demon Slayer anime" },
                { id: "kc004", name: "Pikachu Keychain", price: 109, img: "Screenshot_20250422_131948_Meesho.jpg", desc: "Cute Pikachu keychain with enamel finish" }
            ],
            artSupplies: [
                { id: "as001", name: "Camel water colour tube", price: 169, img: "Screenshot_20250424_134214_Meesho.jpg", desc: "Professional-grade watercolor tubes, set of 12 vibrant colors" },
                { id: "as002", name: "FLAIR Acrylic marker", price: 359, img: "Screenshot_20250423_144509_Meesho.jpg", desc: "Premium acrylic paint markers, fine tip for detailed work" },
                { id: "as003", name: "Levin Acrylic Markers", price: 409, img: "Screenshot_20250423_140558_Meesho.jpg", desc: "Dual-tip acrylic markers with broad and fine tips" },
                { id: "as004", name: "Marker Set of 48", price: 299, img: "Touch-48-Color-Marker-Pen-Set-Kids-Art-Essentials-Double-Ended-Vibrant-Colors-Non-Bleeding-Wholesale-Discount-.webp", desc: "48-color marker set with dual tips for versatility" },
                { id: "as005", name: "Markers Set of 24", price: 179, img: "81B5uZXhYEL._AC_UF1000,1000_QL80_.jpg", desc: "24-color marker set, perfect for beginners" },
                { id: "as006", name: "Paint Brush 12 sizes", price: 89, img: "Screenshot_20250423_195924_Meesho.jpg", desc: "Professional paint brush set with 12 different sizes" },
                { id: "as007", name: "Sponge Dabbing Brush 5 Piece Set", price: 90, img: "41fvlzAzMWL._AC_.jpg", desc: "Sponge brush set for texture painting and special effects" },
                { id: "as008", name: "Camel artist gesso + Decor varnish combo", price: 259, img: "camel-combo.jpg", desc: "Premium gesso (100ml) and varnish combo for art projects" }
            ],
            stationery: [
                { id: "st001", name: "Correction Tape", price: 70, img: "51l7S8XUY0L.jpg", desc: "Smooth correction tape for error-free writing" },
                { id: "st002", name: "Hot Melt Glue Gun (20W)", price: 220, img: "71xHhYjWcIL.jpg", desc: "20W glue gun with 5 glue sticks included" },
                { id: "st003", name: "Sketch Kit", price: 619, img: "Screenshot_20250423_205027_Meesho.jpg", desc: "Complete sketching kit with pencils, erasers and sharpeners" },
                { id: "st004", name: "Luxury Pen", price: 199, img: "Screenshot_20250422_001401.jpg", desc: "Premium metal body pen with smooth ink flow" },
                { id: "st005", name: "Sketch book A5 (100pg)", price: 119, img: "Screenshot_20250423_204415_Meesho.jpg", desc: "A5 size sketchbook with 100gsm paper, 100 pages" }
            ],
            diaries: [
                { id: "di001", name: "Hardcover Diary", price: 249, img: "81EROqfMQBL._AC_UF1000,1000_QL80_.jpg", desc: "Classic hardcover diary with premium paper and ribbon marker" },
                { id: "di002", name: "Premium Lock Diary", price: 319, img: "IMG-20250422-WA0005.jpg", desc: "Premium leather-bound diary with lock and key" },
                { id: "di003", name: "Mini Pocket Diary", price: 219, img: "Screenshot_20250422_215326_Meesho.jpg", desc: "Compact pocket diary with elastic closure" },
                { id: "di004", name: "Vintage Leather Journal", price: 499, img: "Screenshot_20250426_225225_Amazon.jpg", desc: "Premium handcrafted leather diary with handmade paper" }
            ],
            gadgets: [
                 { id: "ga001", name: "Mini Thermal Printer", price: 899, img: "placeholder-gadget.png", desc: "Compact thermal printer for labels, notes & fun prints. Bluetooth connectivity." }
            ]
        };

        // --- State Variables ---
        let currentModalProduct = null; // { category: string, index: number, id: string }
        let currentCategoryFilter = 'all';
        let orderItems = {}; // Stores product ID and quantity: { "productId": quantity, ... }


        // --- Utility Functions ---
        function escapeHtml(unsafe) {
            if (typeof unsafe !== 'string') return unsafe;
            return unsafe
                 .replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
        }

        function findProduct(id) {
            for (const categoryKey in products) {
                const product = products[categoryKey].find(p => p.id === id);
                if (product) {
                    // Return product details along with its category
                    return { ...product, category: categoryKey };
                }
            }
            return null; // Product not found
        }


        // --- Product Rendering ---
        function renderProducts(category = 'all', searchTerm = '') {
            const container = document.getElementById("productsContainer");
            if (!container) { console.error("productsContainer not found!"); return; }

            container.innerHTML = '<div class="loader"></div>'; // Show loader

            requestAnimationFrame(() => {
                try {
                    container.innerHTML = ''; // Clear loader/previous content
                    let hasProducts = false;
                    const searchTermLower = searchTerm.toLowerCase().trim();
                    currentCategoryFilter = category;

                    const createCategorySection = (catKey, items) => {
                        const filtered = items.filter(item =>
                            !searchTermLower ||
                            item.name.toLowerCase().includes(searchTermLower) ||
                            item.desc.toLowerCase().includes(searchTermLower)
                        );

                        if (filtered.length > 0) {
                            hasProducts = true;
                            const section = document.createElement('div');
                            section.className = 'mb-16'; // No initial animation here, handled by card + observer
                            const title = catKey.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                             // Only show category title if filtering by all or this specific category
                            if (category === 'all' || category === catKey) {
                                section.innerHTML = `<h3 class="category-title reveal">${escapeHtml(title)}</h3>`;
                            }


                            const grid = document.createElement('div');
                            // Modified grid class for 2 columns
                            grid.className = 'grid grid-cols-1 sm:grid-cols-2 gap-8 md:gap-10';
                            grid.id = `${catKey}Grid`;
                            section.appendChild(grid);
                            container.appendChild(section);

                            filtered.forEach((product) => {
                                // Use the product object directly, findProduct is not needed here for rendering
                                const card = createProductCard(product);
                                grid.appendChild(card);
                                // Add to observer for reveal animation
                                observeElement(card);
                            });
                            observeElement(section.querySelector('.category-title')); // Observe title too
                        }
                    };

                    if (category === 'all') {
                        Object.entries(products).forEach(([catKey, items]) => {
                            createCategorySection(catKey, items);
                        });
                    } else if (products[category]) {
                        createCategorySection(category, products[category]);
                    }

                    if (!hasProducts) {
                        container.innerHTML = '<p class="text-center text-gray-400 py-12 text-lg">No products found matching your criteria.</p>';
                    }

                } catch (error) {
                    console.error("Error rendering products:", error);
                    container.innerHTML = '<p class="text-center text-red-500 py-12 text-lg">Error loading products. Please try again later.</p>';
                }
            });
        }

        function createProductCard(product) {
            const card = document.createElement("div");
            card.id = `product-${product.id}`;
             // Added 'reveal' class for scroll animation and data attribute for ID
            card.className = "product-card reveal";
            card.setAttribute('data-product-id', product.id);


            const productNameSafe = escapeHtml(product.name);
            const productDescSafe = escapeHtml(product.desc);
            const productImgSafe = escapeHtml(product.img);

            const quantity = orderItems[product.id] || 0; // Get current quantity from state

            card.innerHTML = `
                <div class="product-image-wrapper cursor-pointer">
                    <img src="${productImgSafe}" alt="${productNameSafe}" loading="lazy" class="product-img">
                </div>
                <div class="product-card-content cursor-pointer">
                    <div>
                        <h3 title="${productNameSafe}">${productNameSafe}</h3>
                        <p class="product-desc" title="${productDescSafe}">${productDescSafe ? productDescSafe.substring(0, 80) + (productDescSafe.length > 80 ? '...' : '') : ''}</p>
                        <span class="block product-price">â‚¹${product.price}</span>
                    </div>
                </div>
                <div class="product-card-controls mt-auto">
                    ${quantity === 0
                        ? `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${product.id}">Add</button>`
                        : `
                            <div class="product-quantity-controls" data-product-id="${product.id}">
                                <button type="button" class="btn btn-secondary btn-small btn-decrease" aria-label="Decrease quantity">-</button>
                                <span class="product-quantity">${quantity}</span>
                                <button type="button" class="btn btn-secondary btn-small btn-increase" aria-label="Increase quantity">+</button>
                            </div>
                        `
                    }
                </div>
            `;

            // Add event listener to image/content for modal view
            card.querySelector('.product-image-wrapper').onclick = () => showModal(product.id);
            card.querySelector('.product-card-content').onclick = () => showModal(product.id);


            return card;
        }

        // --- Order Management Functions ---
        function addItemToOrder(productId) {
            if (orderItems[productId]) {
                increaseQuantity(productId);
            } else {
                orderItems[productId] = 1;
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function increaseQuantity(productId) {
            if (orderItems[productId] !== undefined) {
                orderItems[productId]++;
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function decreaseQuantity(productId) {
            if (orderItems[productId] !== undefined) {
                orderItems[productId]--;
                if (orderItems[productId] <= 0) {
                    delete orderItems[productId];
                }
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function updateProductCardUI(productId) {
            const card = document.getElementById(`product-${productId}`);
            if (!card) {
                 console.warn(`Product card not found for ID: ${productId}`);
                 return;
            }

            const controlsContainer = card.querySelector('.product-card-controls');
            const quantity = orderItems[productId] || 0;

            controlsContainer.innerHTML = ''; // Clear current controls

            if (quantity === 0) {
                controlsContainer.innerHTML = `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${productId}">Add</button>`;
            } else {
                 controlsContainer.innerHTML = `
                    <div class="product-quantity-controls" data-product-id="${productId}">
                        <button type="button" class="btn btn-secondary btn-small btn-decrease" aria-label="Decrease quantity">-</button>
                        <span class="product-quantity">${quantity}</span>
                        <button type="button" class="btn btn-secondary btn-small btn-increase" aria-label="Increase quantity">+</button>
                    </div>
                 `;
            }
             // Re-attach event listeners via delegation after updating innerHTML
             // This is handled by the main delegated listener on #productsContainer
        }

        function renderOrderSummary() {
             const summaryDisplay = document.getElementById('orderSummaryDisplay');
             const hiddenSummaryInput = document.getElementById('hiddenOrderSummary');
             const formSubjectInput = document.getElementById('formSubject');

             if (!summaryDisplay || !hiddenSummaryInput || !formSubjectInput) {
                 console.error("Order summary elements not found.");
                 return;
             }

             const productIds = Object.keys(orderItems);
             let totalAmount = 0;
             let displayHTML = '';
             let hiddenText = 'Order Summary:\n\n';

             if (productIds.length === 0) {
                 displayHTML = '<p>Add items from the collection above to see your order here.</p>';
                 hiddenText = 'Order is empty.';
                 formSubjectInput.value = 'New Order from The Highon\'s Site (Empty)';
             } else {
                 displayHTML += '<ul>';
                 productIds.forEach(productId => {
                     const product = findProduct(productId);
                     const quantity = orderItems[productId];
                     if (product && quantity > 0) {
                         const itemTotal = product.price * quantity;
                         totalAmount += itemTotal;
                         displayHTML += `
                            <li>
                                <span class="order-item-name">${escapeHtml(product.name)}</span> x ${quantity}
                                <span class="float-right">â‚¹${itemTotal.toFixed(2)}</span>
                            </li>
                         `;
                          hiddenText += `- ${escapeHtml(product.name)} x ${quantity} (â‚¹${product.price} each = â‚¹${itemTotal.toFixed(2)})\n`;
                     }
                 });
                 displayHTML += '</ul>';
                 displayHTML += `<div class="order-total">Total: â‚¹${totalAmount.toFixed(2)}</div>`;
                 hiddenText += `\nTotal Amount: â‚¹${totalAmount.toFixed(2)}`;
                 formSubjectInput.value = `New Order from The Highon's Site (Total â‚¹${totalAmount.toFixed(2)})`;
             }

             summaryDisplay.innerHTML = displayHTML;
             hiddenSummaryInput.value = hiddenText;
        }


        // --- UI Interaction Functions ---

        function showModal(productId) {
           try {
                const product = findProduct(productId);
                if (!product) {
                    console.error("Product not found for modal:", productId);
                    return;
                }

                const modalImg = document.getElementById('modalImg');
                const modalName = document.getElementById('modalName');
                const modalDesc = document.getElementById('modalDesc');
                const modalPrice = document.getElementById('modalPrice');
                const productModal = document.getElementById('productModal');

                if (!modalImg || !modalName || !modalDesc || !modalPrice || !productModal) {
                     console.error("Modal elements missing!");
                     return;
                }

                modalImg.src = escapeHtml(product.img);
                modalImg.alt = escapeHtml(product.name);
                modalName.textContent = escapeHtml(product.name);
                modalDesc.textContent = escapeHtml(product.desc);
                modalPrice.textContent = `â‚¹${product.price}`;

                productModal.classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Prevent body scroll

           } catch (error) {
                console.error("Error showing modal:", error);
                closeModal();
           }
        }

        function closeModal() {
          const productModal = document.getElementById('productModal');
          if (productModal) {
            productModal.classList.add('hidden');
          }
          document.body.classList.remove('overflow-hidden'); // Re-enable body scroll
        }

        function toggleMobileMenu() {
          const mobileMenu = document.getElementById('mobileMenu');
          if (mobileMenu) {
            mobileMenu.classList.toggle('hidden');
          }
        }


        // --- Scroll Animation Observer ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    // Optional: unobserve after revealing to save resources
                    // observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1 // Trigger when 10% of the element is visible
        });
        function observeElement(element) {
            if (element) {
                observer.observe(element);
            }
        }

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
          try {
              // Set footer year
              const footerYear = document.getElementById('footerYear');
              if (footerYear) footerYear.textContent = new Date().getFullYear();

              // Initial render of products
              renderProducts('all', '');
              renderOrderSummary(); // Render empty order summary initially


              // --- Event Listeners Setup ---

              // Product Search Input
              const productSearchInput = document.getElementById('productSearch');
              if (productSearchInput) {
                   let searchTimeout;
                   productSearchInput.addEventListener('input', function() {
                       clearTimeout(searchTimeout);
                       const searchTerm = this.value;
                       searchTimeout = setTimeout(() => {
                           renderProducts(currentCategoryFilter, searchTerm);
                       }, 300); // Slightly longer debounce
                   });
              } else { console.error("Product search input not found."); }

              // Category Filter Select
              const categoryFilterSelect = document.getElementById('categoryFilter');
              if (categoryFilterSelect) {
                   categoryFilterSelect.addEventListener('change', function() {
                      const searchVal = document.getElementById('productSearch')?.value || '';
                      renderProducts(this.value, searchVal);
                   });
              } else { console.error("Category filter select not found."); }

               // Modal close on background click
               const productModal = document.getElementById('productModal');
               if (productModal) {
                   productModal.addEventListener('click', (event) => {
                       if (event.target === productModal) {
                           closeModal();
                       }
                   });
               }

               // --- Event Delegation for Product Card Controls ---
               const productsContainer = document.getElementById('productsContainer');
               if (productsContainer) {
                   productsContainer.addEventListener('click', (event) => {
                       const target = event.target;
                       const productId = target.closest('.product-card')?.getAttribute('data-product-id');

                       if (!productId) return; // Not a product card control click

                       if (target.classList.contains('btn-add')) {
                           addItemToOrder(productId);
                       } else if (target.classList.contains('btn-increase')) {
                           increaseQuantity(productId);
                       } else if (target.classList.contains('btn-decrease')) {
                           decreaseQuantity(productId);
                       } else if (target.classList.contains('product-img') || target.closest('.product-image-wrapper') || target.closest('.product-card-content')) {
                           // Clicked image or content area - open modal
                           showModal(productId);
                       }
                   });
               } else { console.error("productsContainer not found for event delegation."); }


               // --- Order Form Submission Listener ---
               const orderForm = document.getElementById('orderForm');
               if (orderForm) {
                   orderForm.addEventListener('submit', function(event) {
                       // The hidden input field "Order Summary" is populated by renderOrderSummary
                       // which is called whenever orderItems changes.
                       // We just need to ensure it's up-to-date right before submit
                       renderOrderSummary(); // Call one last time to be safe

                       // Basic validation: Check if any items are in the order
                       if (Object.keys(orderItems).length === 0) {
                            alert("Your order list is empty. Please add items from the collection before placing an order.");
                            event.preventDefault(); // Prevent form submission
                       } else {
                            // Optional: Disable the submit button to prevent double clicks
                            const submitButton = orderForm.querySelector('button[type="submit"]');
                            if(submitButton) {
                                submitButton.disabled = true;
                                submitButton.textContent = 'Placing Order...';
                            }
                       }
                       // FormSubmit.co handles the actual AJAX submission or page redirect
                   });
               } else { console.error("Order form not found."); }


               // Observe elements with 'reveal' class initially present in HTML
                document.querySelectorAll('.reveal').forEach(el => observeElement(el));


          } catch (error) {
               console.error("Critical error during DOMContentLoaded initialization:", error);
               alert("Error loading page content. Some features might be unavailable. Please refresh.");
               // Optional: Display a more user-friendly error message
               document.body.innerHTML = `<div style="padding: 40px; text-align: center; font-family: sans-serif; color: white;"><h1>Oops!</h1><p>Something went wrong while loading the page. Please <a href="javascript:location.reload();" style="color: #7f5af0;">refresh</a> and try again.</p><p>Error: ${escapeHtml(error.message)}</p></div>`;
          }
        });
    </script>

</body>
</html>
