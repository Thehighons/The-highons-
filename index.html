<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="The Highon's - Premium creative supplies including keychains, art supplies, stationery, gadgets, and diaries available for inquiry in Navsari.">
    <title>The Highon's - Premium Creative Supplies | Navsari</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* Removed Trajan Pro as it doesn't fit the new aesthetic */
        /* @font-face { ... } */

        :root {
          /* Color Palette based on the puffer jacket image: Dark background, light text, gold accent */
          --bg-dark: #111; /* Very dark background */
          --text-main: #EEE; /* Off-white text */
          --text-secondary: #AAA; /* Lighter grey text */
          --primary-accent: #D4AF37; /* Gold */
          --secondary-accent: #FFD700; /* Brighter Gold/Yellow */
          --card-bg: #1A1A1A; /* Slightly lighter dark for cards */
          --border-color: rgba(212, 175, 55, 0.3); /* Subtle border based on accent */
           --danger-color: #E57373; /* Soft Red for errors/increases */
           --success-color: #81C784; /* Green for success/discounts */
        }

        /* Smooth Scrolling */
        html {
          scroll-behavior: smooth;
        }

        body {
          font-family: 'Inter', sans-serif; /* Using Inter for body text */
          background-color: var(--bg-dark);
          color: var(--text-main);
          overflow-x: hidden; /* Prevent horizontal scroll */
        }
        /* Prevent body scroll when modal or overlay is open */
        body.overflow-hidden {
            overflow: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
          font-family: 'Roboto', sans-serif; /* Using Roboto for headings */
          color: var(--text-main);
          font-weight: 700; /* Bold headings */
        }
        .brand-name {
          font-family: 'Roboto', sans-serif; /* Consistent sans-serif for brand */
          letter-spacing: 2px; /* Increased letter spacing */
          color: var(--primary-accent); /* Accent color for brand */
          font-weight: 700;
        }

        /* Header Styling */
        header {
          background-color: rgba(17, 17, 17, 0.9); /* Semi-transparent dark bg */
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          border-bottom: 1px solid var(--border-color);
        }

        /* Navigation Links */
        .nav-link {
          position: relative;
          color: var(--text-secondary);
          transition: all 0.3s ease;
          padding: 0.5rem 0.25rem;
          font-weight: 500;
          letter-spacing: 1px; /* Added letter spacing */
        }
        .nav-link:hover {
          color: var(--primary-accent); /* Hover uses accent color */
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 50%;
            background-color: var(--secondary-accent); /* Use brighter accent color */
            transition: all 0.3s ease;
            transform: translateX(-50%);
            border-radius: 1px;
        }
        .nav-link:hover::after {
            width: 70%; /* Underline effect */
        }

        /* Hero Section */
        .hero-section {
            position: relative;
            overflow: hidden;
            background: linear-gradient(to bottom, var(--bg-dark) 0%, #000 100%); /* Dark gradient */
        }
        /* Animated background shapes (Example) */
        .hero-shapes div {
            position: absolute;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--primary-accent), var(--secondary-accent));
            opacity: 0.05; /* Very subtle opacity */
            animation: drift 25s infinite linear alternate; /* Slower animation */
        }
        .hero-shapes div:nth-child(1) { width: 200px; height: 200px; top: 5%; left: 10%; animation-duration: 28s;}
        .hero-shapes div:nth-child(2) { width: 100px; height: 100px; top: 75%; left: 85%; animation-duration: 20s; animation-delay: 3s;}
        .hero-shapes div:nth-child(3) { width: 150px; height: 150px; top: 30%; left: 40%; animation-duration: 30s; animation-delay: 5s;}

        @keyframes drift {
            from { transform: translateY(0px) translateX(0px) rotate(0deg) scale(1); }
            to { transform: translateY(30px) translateX(-20px) rotate(45deg) scale(1.1); }
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.8rem 2rem;
            border-radius: 3px; /* Less rounded corners */
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            border: none;
            position: relative;
            overflow: hidden;
            z-index: 1;
            white-space: nowrap;
            text-transform: uppercase; /* Uppercase text */
            letter-spacing: 1px;
        }
         /* Subtle shine effect - simplified */
        .btn::before {
             content: "";
             position: absolute;
             top: 0;
             left: -100%;
             width: 100%;
             height: 100%;
             background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.1), transparent);
             transition: left 0.6s ease;
             z-index: -1;
         }
         .btn:hover::before {
             left: 100%;
         }


        .btn-primary {
            background-color: var(--primary-accent); /* Solid accent color */
            color: var(--bg-dark); /* Dark text on accent */
            box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); /* Shadow based on accent */
        }
        .btn-primary:hover {
            background-color: var(--secondary-accent); /* Brighter accent on hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.4); /* Shadow based on secondary accent */
        }
         .btn-primary:disabled {
             opacity: 0.5;
             cursor: not-allowed;
             transform: none;
             box-shadow: none;
         }
          .btn-primary:disabled::before {
               left: -100%; /* Disable shine effect */
          }


        .btn-secondary {
            background-color: transparent;
            color: var(--primary-accent);
            border: 1px solid var(--primary-accent); /* Thinner border */
            box-shadow: none;
        }
        .btn-secondary:hover {
            background-color: rgba(212, 175, 55, 0.1); /* Subtle hover background */
            transform: translateY(-1px);
        }

         /* Small buttons for quantity control */
         .btn-small {
             padding: 0.3rem 0.6rem; /* Reduced padding */
             font-size: 0.8rem; /* Smaller font */
             border-radius: 2px; /* Less rounded */
         }


        /* Product Section */
         #products {
            background: linear-gradient(to bottom, var(--bg-dark), #000); /* Dark gradient */
            position: relative;
            padding-top: 6rem; /* Reduced top padding */
            padding-bottom: 6rem; /* Reduced bottom padding */
         }
         #products::before { /* Removed top separator glow */
            content: none;
         }

        .category-title {
            background: none; /* Removed background gradient */
            color: var(--primary-accent); /* Accent color for category titles */
            padding: 0; /* Removed padding */
            border-radius: 0; /* Removed border-radius */
            display: block; /* Block display */
            text-align: left; /* Align left */
            margin: 40px 0 20px 0; /* Adjusted margin */
            box-shadow: none; /* Removed shadow */
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            font-size: 1.8rem; /* Larger font size */
            border-bottom: 1px solid var(--border-color); /* Subtle separator line */
             padding-bottom: 10px;
             text-transform: uppercase; /* Uppercase */
        }

        /* Redesigned Product Card */
        .product-card {
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            border-radius: 5px; /* Slightly rounded */
            overflow: hidden;
            transition: all 0.3s ease; /* Smoother transition */
            position: relative;
            transform-style: preserve-3d;
            box-shadow: 0 2px 10px rgba(0,0,0, 0.4); /* Softer shadow */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
             cursor: pointer; /* Indicate clickable */
        }
        .product-card:hover {
            transform: translateY(-5px); /* Lift effect */
            box-shadow: 0 8px 20px rgba(0,0,0, 0.6);
            border-color: var(--primary-accent); /* Accent border on hover */
        }
         .product-card::after { /* Removed subtle glow effect */
             content: none;
         }


        .product-image-wrapper {
            height: 220px; /* Slightly taller fixed height */
            background-color: rgba(255, 255, 255, 0.03); /* Very subtle light bg */
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            overflow: hidden;
        }
        .product-image-wrapper img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }
        .product-card:hover .product-image-wrapper img {
            transform: scale(1.05); /* Subtle zoom on hover */
        }

        .product-card-content {
            padding: 1rem; /* Reduced padding */
            text-align: left; /* Align content left */
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }
        .product-card h3 {
            font-family: 'Roboto', sans-serif; /* Use heading font for card title */
            font-size: 1rem; /* Smaller font size */
            font-weight: 700;
            margin-bottom: 0.3rem; /* Reduced margin */
            color: var(--text-main);
            min-height: 2.6em; /* Adjusted height */
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
             text-transform: uppercase; /* Uppercase title */
             letter-spacing: 0.5px;
        }
         .product-card p.product-desc {
             font-family: 'Inter', sans-serif; /* Use body font for description */
             font-size: 0.8rem; /* Smaller font size */
             color: var(--text-secondary);
             margin-bottom: 0.8rem; /* Reduced margin */
             min-height: 3em; /* Adjusted height */
             display: -webkit-box;
             -webkit-line-clamp: 3;
             -webkit-box-orient: vertical;
             overflow: hidden;
             text-overflow: ellipsis;
         }
        .product-card .product-price {
            font-family: 'Roboto', sans-serif; /* Heading font for price */
            font-size: 1.2rem; /* Adjusted size */
            font-weight: 700;
            color: var(--secondary-accent); /* Brighter accent color for price */
            margin-bottom: 1rem; /* Adjusted margin */
        }
        /* Product Controls - Centered at the bottom */
        .product-card-controls {
            padding: 0 1rem 1rem; /* Padding bottom matches content */
            display: flex;
            justify-content: center; /* Center buttons */
            align-items: center;
            width: 100%;
        }

        .product-quantity-controls {
             display: flex;
             align-items: center;
             gap: 0.5rem;
             width: 100%;
             justify-content: center;
        }
         .product-quantity {
             font-family: 'Roboto', sans-serif; /* Heading font for quantity */
             font-size: 1rem; /* Adjusted size */
             font-weight: 700;
             color: var(--text-main);
             min-width: 25px; /* Adjusted width */
             text-align: center;
         }

        /* Filter/Search Styling */
        #productSearch, #categoryFilter, #couponCode {
            background-color: var(--card-bg);
            color: var(--text-main);
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            border-radius: 3px; /* Less rounded */
            padding: 0.8rem 1.2rem; /* Adjusted padding */
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }
         #productSearch::placeholder, #couponCode::placeholder {
             color: var(--text-secondary);
             opacity: 0.7;
         }
        #productSearch { padding-left: 2.5rem; } /* Space for icon */
        #categoryFilter {
          appearance: none;
          /* Updated background image color to match new text-secondary */
          background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23AAAAAA"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>');
          background-repeat: no-repeat;
          background-position: right 1rem center;
          background-size: 0.9em 0.9em; /* Slightly smaller icon */
          padding-right: 2.5rem;
        }
         #categoryFilter option {
             background-color: var(--bg-dark); /* Dark background for options */
             color: var(--text-main);
         }

        #productSearch:focus, #categoryFilter:focus, #couponCode:focus {
             border-color: var(--primary-accent); /* Accent border on focus */
             box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.5); /* Subtle accent glow */
             outline: none;
             background-color: rgba(26, 26, 26, 0.9); /* Slightly darker input bg on focus */
        }
         #couponCode:disabled {
             opacity: 0.6;
             cursor: not-allowed;
             background-color: rgba(26, 26, 26, 0.5);
         }
        .search-icon { color: var(--text-secondary); left: 1rem; font-size: 0.9rem;} /* Adjusted icon position and size */

        /* Form Styling */
        .form-section {
            background-color: var(--bg-dark);
            position: relative;
            overflow: hidden;
            padding-top: 6rem; /* Reduced padding */
            padding-bottom: 6rem; /* Reduced padding */
        }
        .form-section::before { /* Removed aurora effect background */
             content: none;
        }

        .form-container {
            background-color: var(--card-bg); /* Use card background */
            /* Removed backdrop-filter as it doesn't fit minimalist dark theme */
            /* backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px); */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            border-radius: 5px; /* Less rounded */
            padding: 2.5rem; /* Adjusted padding */
            position: relative;
            z-index: 1;
            box-shadow: 0 5px 15px rgba(0,0,0,0.4);
        }
        .form-container label {
             color: var(--text-secondary);
             font-weight: 500;
             font-size: 0.85rem; /* Smaller label font */
             margin-bottom: 0.4rem; /* Reduced margin */
             display: block;
             text-transform: uppercase; /* Uppercase labels */
             letter-spacing: 0.5px;
        }
        .form-container input[type="text"],
        .form-container input[type="email"],
        .form-container input[type="tel"],
        .form-container textarea,
        .form-container select {
            background-color: rgba(26, 26, 26, 0.7); /* Darker input bg */
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            color: var(--text-main);
            border-radius: 3px; /* Less rounded */
            padding: 0.9rem 1rem;
             width: 100%;
             transition: all 0.3s ease;
             font-family: 'Inter', sans-serif;
             font-size: 0.9rem;
        }
        .form-container input::placeholder,
        .form-container textarea::placeholder {
            color: var(--text-secondary);
            opacity: 0.6;
        }
        .form-container input:focus,
        .form-container textarea:focus,
        .form-container select:focus {
            border-color: var(--primary-accent);
            background-color: rgba(26, 26, 26, 0.9);
             box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.5);
             outline: none;
        }
         .form-container select option {
             background-color: var(--bg-dark);
             color: var(--text-main);
         }

        /* Order Summary Display */
         #orderSummaryDisplay {
             background-color: rgba(26, 26, 26, 0.7); /* Based on card bg */
             border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
             border-radius: 5px; /* Less rounded */
             padding: 1.2rem; /* Adjusted padding */
             margin-bottom: 1.5rem;
             min-height: 80px;
             color: var(--text-main);
             font-size: 0.9rem; /* Slightly smaller font */
         }
         #orderSummaryDisplay p {
             color: var(--text-secondary);
             text-align: center;
         }
         #orderSummaryDisplay ul {
             list-style: none;
             padding: 0;
             margin: 0;
         }
         #orderSummaryDisplay li {
             padding: 0.6rem 0; /* Adjusted padding */
             border-bottom: 1px dashed rgba(255, 255, 255, 0.08); /* More subtle dashed border */
              display: flex;
              justify-content: space-between;
              align-items: center;
         }
         #orderSummaryDisplay li:last-child {
             border-bottom: none;
         }
         #orderSummaryDisplay .order-item-name {
             font-weight: 600;
             color: var(--text-main);
             flex-grow: 1;
             margin-right: 0.8rem; /* Increased margin */
         }
         #orderSummaryDisplay .order-item-quantity {
              color: var(--text-secondary);
              font-size: 0.8rem; /* Smaller quantity font */
         }
         #orderSummaryDisplay .order-item-price {
              font-weight: 500;
              color: var(--text-main);
              min-width: 60px; /* Ensure price column alignment */
              text-align: right;
         }
          #orderSummaryDisplay .order-summary-line {
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 0.6rem 0;
               border-bottom: 1px dashed rgba(255, 255, 255, 0.08);
          }
          #orderSummaryDisplay .order-summary-line:last-child {
              border-bottom: none;
          }

         #orderSummaryDisplay .order-total {
              font-size: 1.3rem; /* Adjusted total font size */
              font-weight: 700;
              color: var(--secondary-accent); /* Brighter accent for total */
              margin-top: 1.2rem; /* Adjusted margin */
              text-align: right;
              padding-top: 0.8rem; /* Adjusted padding */
              border-top: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
         }
         #orderSummaryDisplay .discount-line {
             color: var(--success-color);
         }
          #orderSummaryDisplay .increase-line {
              color: var(--danger-color);
          }


        /* Contact Section */
        #contact {
            background-color: var(--card-bg); /* Use card bg */
            padding-top: 6rem; /* Reduced padding */
            padding-bottom: 6rem; /* Reduced padding */
        }
        .contact-info-box {
             background-color: rgba(26, 26, 26, 0.8); /* Slightly darker box */
             border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
             border-radius: 5px; /* Less rounded */
             padding: 2.5rem; /* Adjusted padding */
             transition: all 0.3s ease;
        }
        .contact-info-box:hover {
             border-color: var(--primary-accent); /* Accent border on hover */
             transform: translateY(-3px); /* Softer lift */
             box-shadow: 0 6px 15px rgba(0,0,0,0.35); /* Softer shadow */
        }
        .contact-info-box h3 {
             text-align: left; /* Align left */
             border-bottom: 1px solid var(--border-color); /* Subtle separator */
             padding-bottom: 10px;
             margin-bottom: 20px;
        }
        .contact-info-box a {
            color: var(--primary-accent);
            transition: color 0.3s ease;
            word-break: break-all;
        }
        .contact-info-box a:hover {
            color: var(--secondary-accent); /* Brighter accent on hover */
        }
        .social-icons a {
            color: var(--text-secondary);
            font-size: 2rem; /* Larger icons */
            transition: all 0.3s ease;
        }
        .social-icons a:hover {
             color: var(--primary-accent);
             transform: scale(1.1); /* No rotation */
        }

        /* Footer */
        footer {
            background-color: var(--bg-dark);
            border-top: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            padding-top: 2rem; /* Adjusted padding */
            padding-bottom: 2rem; /* Adjusted padding */
        }
        footer .brand-name { color: var(--primary-accent); }
        footer a { color: var(--text-secondary); transition: color 0.3s ease; }
        footer a:hover { color: var(--primary-accent); }
        footer .text-gray-500 { color: var(--text-secondary); opacity: 0.7; font-size: 0.75rem; } /* Adjusted size */

        /* Modal Styling (for product details) */
        .modal-backdrop {
             background-color: rgba(0, 0, 0, 0.8); /* Darker backdrop */
             backdrop-filter: blur(5px); /* Softer blur */
            -webkit-backdrop-filter: blur(5px);
        }
        .modal-content {
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1); /* Subtle white border */
            border-radius: 5px; /* Less rounded */
            color: var(--text-main);
             box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
        }
        .modal-content img { border-radius: 3px; background-color: rgba(255, 255, 255, 0.03); padding: 0.5rem; } /* Adjusted styling */
        .modal-content h3 { color: var(--text-main); font-family: 'Roboto', sans-serif; font-size: 1.8rem; font-weight: 700; } /* Adjusted font */
        .modal-content p { color: var(--text-secondary); font-family: 'Inter', sans-serif; font-size: 0.9rem; } /* Adjusted font */
        .modal-content .modal-price { color: var(--secondary-accent); font-family: 'Roboto', sans-serif; font-size: 2rem; font-weight: 700;} /* Adjusted font */
        .modal-close-btn {
            color: var(--text-secondary);
            transition: all 0.3s ease;
             font-size: 2rem; /* Adjusted size */
        }
        .modal-close-btn:hover {
             color: var(--primary-accent); /* Accent color on hover */
             transform: rotate(0deg); /* No rotation */
        }

        /* Loader */
        .loader {
          border: 4px solid rgba(255, 255, 255, 0.1); /* Subtle border */
          border-top: 4px solid var(--primary-accent); /* Accent color spinner */
          border-radius: 50%;
          width: 50px;
          height: 50px;
          animation: spin 1s linear infinite;
          margin: 80px auto;
        }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        /* Animation Utilities */
        .reveal {
            opacity: 0;
            transform: translateY(20px); /* Start slightly below */
            transition: opacity 0.6s ease-out, transform 0.6s ease-out; /* Softer transition */
            transition-delay: 0s;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Order Form Styling (matches form-container) */
        #orderFormContainer {
             background-color: var(--card-bg);
             border: 1px solid rgba(255, 255, 255, 0.1);
             border-radius: 5px;
             padding: 2.5rem;
             position: relative;
             z-index: 1;
             box-shadow: 0 10px 25px rgba(0,0,0,0.3);
             max-width: 700px; /* Wider form container */
             margin: 0 auto;
        }
         #orderFormContainer label {
             color: var(--text-secondary);
             font-weight: 500;
             font-size: 0.85rem;
             margin-bottom: 0.4rem;
             display: block;
              text-transform: uppercase;
              letter-spacing: 0.5px;
         }
         #orderFormContainer input[type="text"],
         #orderFormContainer input[type="email"],
         #orderFormContainer input[type="tel"],
         #orderFormContainer textarea,
         #orderFormContainer select {
            background-color: rgba(26, 26, 26, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-main);
            border-radius: 3px;
            padding: 0.9rem 1rem;
             width: 100%;
             transition: all 0.3s ease;
             font-family: 'Inter', sans-serif;
             font-size: 0.9rem;
        }
        #orderFormContainer input::placeholder,
        #orderFormContainer textarea::placeholder {
            color: var(--text-secondary);
            opacity: 0.6;
        }
        #orderFormContainer input:focus,
        #orderFormContainer textarea:focus,
        #orderFormContainer select:focus {
            border-color: var(--primary-accent);
            background-color: rgba(26, 26, 26, 0.9);
             box-shadow: 0 0 0 1px rgba(212, 175, 55, 0.5);
             outline: none;
        }
         #orderFormContainer select option {
             background-color: var(--bg-dark);
             color: var(--text-main);
         }
         #orderFormContainer .btn-primary {
             margin-top: 1.5rem; /* Adjusted margin */
         }
         #orderFormContainer .text-gray-500 {
              color: var(--text-secondary); /* Ensure consistent text color */
         }

        /* Terms Agreement Overlay Styles */
        #termsOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9); /* Darker overlay */
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100; /* Ensure it's on top of everything */
            padding: 20px;
             /* Initially hidden by JS */
        }

        #termsModalContent {
            background-color: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 30px;
            max-width: 600px; /* Increased width */
            width: 100%;
            text-align: center;
            color: var(--text-main);
            position: relative;
            max-height: 90vh; /* Limit height */
            overflow-y: auto; /* Add scrolling for content */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
        }

        #termsModalContent p {
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        #termsModalContent a.terms-link {
            color: #60a5fa; /* Tailwind blue-400 or similar */
            text-decoration: underline;
            cursor: pointer;
            transition: color 0.2s ease;
        }

        #termsModalContent a.terms-link:hover {
            color: #3b82f6; /* Tailwind blue-500 */
        }

        #termsModalContent .btn-enter {
            padding: 12px 30px; /* Slightly larger button */
            font-size: 1.1rem;
             margin-top: 10px; /* Space above button */
        }

         /* Style for the full T&C text within the modal */
         #fullTermsText {
             text-align: left; /* Align T&C text left */
             font-size: 0.95rem; /* Slightly smaller font */
             color: var(--text-secondary); /* Use secondary text color */
             line-height: 1.8; /* Increased line height */
         }
         #fullTermsText h2 {
              color: var(--primary-accent); /* Accent color for T&C headings */
             margin-top: 25px;
             margin-bottom: 10px;
             font-size: 1.4rem;
         }
         #fullTermsText strong {
              color: var(--text-main); /* Main color for strong text */
         }
          #fullTermsText ul {
              padding-left: 20px;
              list-style: disc; /* Use disc for lists */
          }
          #fullTermsText li {
               margin-bottom: 8px;
          }
         #fullTermsText .disclaimer {
              border-color: rgba(255, 193, 7, 0.5); /* Lighter border */
              background-color: rgba(255, 193, 7, 0.1); /* Subtle background */
              color: var(--text-main); /* Main text color */
              padding: 15px;
              margin: 15px 0;
              border-radius: 5px;
              font-size: 0.9em;
         }
          #fullTermsText .highlight {
              color: var(--danger-color); /* Red for highlight */
              font-weight: bold;
          }
          #fullTermsText .ai-statement {
               font-size: 0.85em;
               color: var(--text-secondary);
               margin-top: 20px;
               padding-top: 15px;
               border-top: 1px dashed rgba(255, 255, 255, 0.1);
          }
          #termsModalContent .btn-back {
              margin-top: 20px;
               padding: 8px 15px;
               font-size: 0.9rem;
          }


    </style>
</head>
<body class="flex flex-col min-h-screen">

    <div id="termsOverlay" class="hidden"> <div id="termsModalContent">
            <div id="agreementPrompt">
                <p>By clicking the 'Enter' button, you confirm that you have read and agree to our <a href="#" id="viewTermsLink" class="terms-link">Terms and Conditions</a>.</p>
                <button id="enterWebsiteBtn" class="btn btn-primary btn-enter">Enter</button>
            </div>
            <div id="fullTermsText" class="hidden">
                <h2>Terms and Conditions - The Highon's</h2>
                <p><strong>Effective Date: May 4, 2025</strong></p>

                <p>Welcome to The Highon's Website (the "https://thehighons.github.io/The-highons-/"). This Website is an experimental and educational project created and operated by two individuals aged 15-16.</p>

                <p>Please read these Terms and Conditions ("Terms") carefully before using our Website. By accessing or using the Website, you acknowledge that you have read, understood, and agree to be bound by these Terms. If you do not agree to these Terms, you may not access or use the Website.</p>

                <div class="disclaimer">
                    <p><strong class="highlight">Important Note:</strong> This Website is intended for educational and experimental purposes only. It is not a commercial enterprise, and its content and functionality, including any items offered for order, are provided without formal legal protections, warranties, or guarantees. Operations are limited to local delivery within Navsari (PIN: 396445).</p>
                </div>

                <h2>1. Acceptance of Terms</h2>
                <p>By accessing or using our Website, you agree to comply with and be bound by these Terms. If you do not agree to these Terms, please do not use our Website.</p>

                <h2>2. About the Website and Operators</h2>
                <p>This Website is a non-commercial project developed for learning and experimental purposes by two individuals who are currently 15-16 years old. A significant portion of the Website's content and code has been generated with the assistance of artificial intelligence.
                </p>

                <h2>3. Changes to Terms</h2>
                <p>We reserve the right to modify or replace these Terms at any time. We will indicate at the top of the Terms the date on which they were last updated. Your continued use of the Website after any such changes constitutes your acceptance of the new Terms.</p>

                <h2>4. Access and Use of the Website</h2>
                <p>You may use the Website for lawful purposes only and in accordance with these Terms. You agree not to use the Website:</p>
                <ul>
                    <li>In any way that violates any applicable national, state, local, or international law or regulation.</li>
                    <li>To engage in any conduct that restricts or inhibits anyone's use or enjoyment of the Website.</li>
                    <li>To transmit, or procure the sending of, any unsolicited advertising or promotional material.</li>
                    <li>To impersonate or attempt to impersonate the Website operators or any other person or entity.</li>
                </ul>

                <h2>5. Content and Intellectual Property</h2>
                <p>The content on this Website, including text, graphics, images, and other materials, is provided for informational and experimental purposes only.</p>

                <div class="disclaimer">
                    <p><strong class="highlight">Disclaimer Regarding Intellectual Property:</strong> Please be advised that <span class="highlight">no licenses (including copyright or trademark licenses) have been purchased or formally obtained</span> for the content used on this Website. While efforts are made to respect existing rights, the legal status of much of the content in terms of copyright and usage permissions has not been formally verified or licensed. You should assume that content on this site is not licensed for your reuse.</p>
                    <p>A significant portion of the content and underlying code of this Website has been generated with the assistance of artificial intelligence. We do not guarantee the accuracy, completeness, or originality of AI-generated content.</p>
                </div>

                <p>You may view and use the content for your personal, non-commercial use related to the experimental nature of this Website. You must not reproduce, distribute, modify, create derivative works of, publicly display, publicly perform, republish, download, store, or transmit any of the material on our Website for commercial purposes or without acknowledging the experimental nature and the intellectual property disclaimer mentioned herein.</p>

                <h2>6. Product Orders (Experimental)</h2>
                <p>This Website allows users within Navsari (PIN: 396445) to place experimental orders for items listed on the Website. Please note that all items are offered on an "as is" basis. The descriptions are for identification purposes only.</p>
                <div class="disclaimer">
                 <p><strong class="highlight">Disclaimer of Product Warranties:</strong> <span class="highlight">We provide no guarantees, warranties, or representations, express or implied, regarding the quality, fitness for a particular purpose, or any other characteristic of the items available for order on this Website.</span> All sales are final unless otherwise explicitly stated at the time of order confirmation (which is handled offline after submission).</p>
                </div>
                <p>The ordering functionality is part of the experiment, and fulfillment is subject to availability and the discretion of the operators.</p>

                <h2>7. Prohibited Activities</h2>
                 <p>When using the Website, you agree not to:</p>
                  <ul>
                      <li>Violate any applicable local, state, national, or international law or regulation.</li>
                      <li>Infringe upon the rights of others, including their intellectual property rights.</li>
                      <li>Transmit any malware, viruses, or other harmful computer code.</li>
                      <li>Engage in spamming, phishing, or other fraudulent activities.</li>
                      <li>Attempt to gain unauthorized access to the Website or its systems.</li>
                      <li>Harass, abuse, or harm other users.</li>
                      <li>Use the Website for any commercial purposes without our express written consent (outside of placing experimental orders as permitted herein).</li>
                  </ul>

                <h2>8. Third-Party Links</h2>
                <p>The Website may contain links to third-party websites or services that are not owned or controlled by the Website operators. We have no control over, and assume no responsibility for, the content, privacy policies, or practices of any third-party websites or services. You access these at your own risk.</p>

                <h2>9. Disclaimer of Website Warranties</h2>
                <p>THIS WEBSITE IS PROVIDED FOR EDUCATIONAL AND EXPERIMENTAL PURPOSES ONLY, "AS IS" AND "AS AVAILABLE," WITHOUT ANY WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED. THIS INCLUDES BUT IS NOT LIMITED TO WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, NON-INFRINGEMENT, ACCURACY, RELIABILITY, OR COMPLETENESS OF THE WEBSITE CONTENT OR FUNCTIONALITY.</p>
                <p>WE DO NOT WARRANT THAT THE WEBSITE WILL BE UNINTERRUPTED, SECURE, OR ERROR-FREE, OR THAT ANY DEFECTS WILL BE CORRECTED. YOU USE THE WEBSITE AT YOUR OWN SOLE RISK.</p>

                <h2>10. Limitation of Liability</h2>
                <p>GIVEN THE EXPERIMENTAL AND NON-COMMERCIAL NATURE OF THIS WEBSITE AND THE AGE OF THE OPERATORS, IN NO EVENT SHALL THE WEBSITE OPERATORS, OR ANYONE ASSOCIATED WITH THEM, BE LIABLE FOR ANY DAMAGES OF ANY KIND, UNDER ANY LEGAL THEORY, ARISING OUT OF OR IN CONNECTION WITH YOUR USE, OR INABILITY TO USE, THE WEBSITE, ANY WEBSITES LINKED TO IT, ANY CONTENT ON THE WEBSITE, OR ANY ITEMS ORDERED THROUGH THE WEBSITE. THIS INCLUDES ANY DIRECT, INDIRECT, SPECIAL, INCIDENTAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING BUT NOT LIMITED TO, PERSONAL INJURY, PAIN AND SUFFERING, EMOTIONAL DISTRESS, LOSS OF REVENUE, LOSS OF PROFITS, LOSS OF BUSINESS OR ANTICIPATED SAVINGS, LOSS OF USE, LOSS OF GOODWILL, LOSS OF DATA, AND WHETHER CAUSED BY TORT (INCLUDING NEGLIGENCE), BREACH OF CONTRACT, OR OTHERWISE, EVEN IF FORESEEABLE.</p>

                <h2>11. Indemnification</h2>
                <p>You agree to defend, indemnify, and hold harmless the Website operators, and anyone associated with them, from and against any claims, liabilities, damages, judgments, awards, losses, costs, expenses, or fees (including reasonable attorneys' fees) arising out of or relating to your violation of these Terms or your use of the Website or items obtained through the Website.</p>

                <h2>12. Governing Law</h2>
                <p>While this is an experimental project, your use of the Website may be subject to applicable laws in India, particularly within Navsari, Gujarat. These Terms shall be governed by and construed in accordance with the laws applicable in Navsari, Gujarat, India. However, due to the experimental nature and the age of the operators, formal legal disputes are not anticipated or supported through this platform.</p>

                <h2>13. Termination</h2>
                <p>We may terminate or suspend your access to the Website at any time, without prior notice or liability, for any reason whatsoever, including without limitation if you breach these Terms.</p>

                <h2>14. Severability</h2>
                <p>If any provision of these Terms is held by a court or other tribunal of competent jurisdiction to be invalid, illegal, or unenforceable for any reason, such provision shall be eliminated or limited to the minimum extent such that the remaining provisions of the Terms will continue in full force and effect.</p>

                <h2>15. Entire Agreement</h2>
                <p>These Terms constitute the sole and entire agreement between you and the Website operators regarding the Website.</p>

                <h2>16. Contact Information</h2>
                <p>To ask questions or comment about these Terms and Conditions, please contact us at:</p>
                <p>thehighonsofficial@gmail.com</p>

                <p class="ai-statement">Please note that these Terms and Conditions were drafted with the assistance of artificial intelligence based on the information you provided about your experimental website. For any queries regarding these terms, please contact us at the email address above.</p>

                <button id="backToAgreementBtn" class="btn btn-secondary btn-back">Back to Agreement</button>
            </div>
        </div>
    </div>


    <header class="sticky top-0 z-50">
        <div class="max-w-7xl mx-auto flex items-center justify-between p-4">
            <div class="flex items-center">
                <a href="#" class="text-2xl tracking-wide brand-name">THE HIGHON'S</a>
            </div>
            <nav class="hidden md:flex items-center space-x-6 lg:space-x-8">
                <a href="#products" class="nav-link">Products</a>
                <a href="#order" class="nav-link">Place Order</a>
                <a href="#request" class="nav-link">Request Product</a>
                <a href="#contact" class="nav-link">Contact</a>
            </nav>
            <div class="md:hidden flex items-center">
                <button onclick="toggleMobileMenu()" class="text-gray-300 hover:text-white focus:outline-none" aria-label="Toggle mobile menu">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-[rgba(17,17,17,0.95)] backdrop-blur-sm border-t border-[rgba(255,255,255,0.1)] p-4 absolute w-full shadow-lg">
            <div class="flex flex-col items-center space-y-4">
                <a href="#products" class="nav-link block py-2" onclick="toggleMobileMenu()">Products</a>
                <a href="#order" class="nav-link block py-2" onclick="toggleMobileMenu()">Place Order</a>
                <a href="#request" class="nav-link block py-2" onclick="toggleMobileMenu()">Request Product</a>
                <a href="#contact" class="nav-link block py-2" onclick="toggleMobileMenu()">Contact</a>
            </div>
        </div>
    </header>

    <section class="hero-section text-center pt-28 pb-20 md:pt-36 md:pb-28 relative">
        <div class="hero-shapes absolute inset-0 z-0">
            <div></div> <div></div> <div></div>
        </div>

        <div class="max-w-4xl mx-auto px-6 relative z-10">
             <img src="GridArt_20250428_230202733.png" alt="The Highon's Logo" class="w-56 sm:w-72 md:w-80 mx-auto mb-8 animate__animated animate__fadeInDown" loading="lazy">

            <h1 class="text-4xl md:text-6xl font-bold mb-6 animate__animated animate__fadeInUp">
                Ignite Your <span class="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-gold-500">Creativity</span>. </h1>
            <p class="text-lg md:text-xl mb-10 text-gray-300 max-w-2xl mx-auto animate__animated animate__fadeInUp animate__delay-1s">
                Discover premium supplies in Navsari. Explore keychains, art materials, stationery, and more.
            </p>
            <a href="#products" class="btn btn-primary text-lg px-10 py-4 animate__animated animate__fadeInUp animate__delay-2s">
                Explore Collection
            </a>
        </div>
         </section>

    <section id="products" class="py-20 px-6">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-bold mb-12 text-center reveal">Our Collection</h2>
            <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6 reveal"> <div class="relative w-full md:w-2/5 lg:w-1/3">
                    <input type="text" id="productSearch" placeholder="Search products..." class="w-full" aria-label="Search products">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 search-icon"></i>
                </div>
                <div class="filter-selector text-center md:text-right w-full md:w-auto">
                    <label for="categoryFilter" class="mr-2 font-semibold text-gray-400">Filter:</label>
                    <select id="categoryFilter" class="" aria-label="Select product category">
                        <option value="all">All Products</option>
                        <option value="keychains">Keychains</option>
                        <option value="artSupplies">Art Supplies</option>
                        <option value="stationery">Stationery</option>
                        <option value="diaries">Diaries</option>
                        <option value="gadgets">Gadgets</option>
                    </select>
                </div>
            </div>
            <div id="productsContainer" class="relative min-h-[300px]">
                 <div class="loader"></div>
            </div>
        </div>
    </section>

     <section id="order" class="py-20 px-6 form-section">
        <div class="max-w-3xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Place Your Order</h2>
            <div id="orderFormContainer" class="text-left">
                <p class="text-gray-400 mb-6">Items added from the 'Our Collection' section will appear below. Fill in your details to place your order for delivery within Navsari (PIN: 396445).</p>

                <div>
                     <label class="mb-2 block text-secondary">Your Order Summary</label>
                     <div id="orderSummaryDisplay">
                         <p>Add items from the collection above to see your order here.</p>
                     </div>
                </div>

                 <div class="mt-6 mb-4">
                     <label for="couponCode" class="mb-2 block text-secondary">Have a Coupon Code?</label>
                     <input type="text" id="couponCode" placeholder="Enter coupon code (optional)" aria-label="Enter coupon code">
                      <p id="couponFeedback" class="text-sm mt-2 text-gray-400 min-h-[1.2em]"></p> </div>


                <form id="orderForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                     <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-order.html">
                     <input type="hidden" name="_captcha" value="false">
                     <input type="hidden" name="_subject" id="formSubject" value="New Order from The Highon's Site!">
                     <input type="hidden" name="Order Summary" id="hiddenOrderSummary" value="">
                      <div>
                        <label for="orderNotes">Additional Notes (Optional)</label>
                         <textarea id="orderNotes" name="Additional Notes" rows="3" placeholder="Any specific instructions or details?" aria-label="Additional notes for order"></textarea>
                    </div>

                    <div>
                        <label for="orderName">Full Name</label>
                        <input type="text" id="orderName" name="name" placeholder="Enter your full name" required aria-label="Full Name for order">
                    </div>
                    <div>
                        <label for="orderEmail">Email</label>
                        <input type="email" id="orderEmail" name="email" placeholder="Enter your email" required aria-label="Email Address for order">
                    </div>
                     <div>
                        <label for="orderPhone">Phone (+91)</label>
                         <input type="tel" id="orderPhone" name="phone" placeholder="Enter 10-digit number" required pattern="[6-9]\d{9}" title="Please enter a valid 10-digit Indian mobile number (starting with 6, 7, 8, or 9)" aria-label="Phone number for order (starts with 6-9, 10 digits)">
                    </div>
                    <div>
                        <label for="orderAddress">Full Address (Navsari)</label>
                        <input type="text" id="orderAddress" name="address" placeholder="House No, Street, Area, Navsari - 396445" required aria-label="Full Address for order">
                    </div>

                    <button type="button" id="forgetMyDetailsBtn" class="text-sm text-gray-500 hover:text-red-400 focus:outline-none transition-colors duration-200 mt-2 hidden" aria-label="Forget my saved details">
                        Forget My Details
                    </button>


                    <div>
                        <label for="orderPayment">Payment Option</label>
                        <select id="orderPayment" name="payment" class="w-full" aria-label="Payment option">
                            <option value="COD">Cash on Delivery</option>
                            <option value="UPI">UPI Payment</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-primary w-full" id="placeOrderBtn">Place Order</button>
                </form>
            </div>
        </div>
    </section>


    <section id="request" class="py-20 px-6 form-section">
        <div class="max-w-2xl mx-auto text-center reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Request a Product</h2>
            <p class="text-gray-400 mb-8 max-w-xl mx-auto">Can't find what you're looking for? Let us know, and we'll try our best to source it for you!</p>
            <div class="form-container">
                <form id="requestForm" action="https://formsubmit.co/thehighonsofficial@gmail.com" method="POST" class="space-y-6 text-left">
                    <input type="hidden" name="_next" value="YOUR_THANK_YOU_URL/thank-you-request.html">
                    <input type="hidden" name="_subject" value="New Product Request from The Highon's Site">
                    <input type="hidden" name="_captcha" value="false">
                    <div>
                        <label for="requestName">Product Name</label>
                        <input type="text" id="requestName" name="product" placeholder="e.g., Specific brand watercolor set" required aria-label="Product name for request">
                    </div>
                    <div>
                        <label for="requestDetails">Additional Details (Optional)</label>
                        <textarea id="requestDetails" name="details" rows="4" placeholder="Brand, color, size, quantity, etc." aria-label="Additional details for product request"></textarea>
                    </div>
                    <div>
                        <label for="requestEmail">Your Email</label>
                        <input type="email" id="requestEmail" name="email" placeholder="your.email@example.com" required aria-label="Your email address for request">
                    </div>
                    <button type="submit" class="btn btn-primary w-full mt-4">Submit Request</button>
                </form>
            </div>
        </div>
    </section>

    <section id="contact" class="py-20 text-center px-6">
        <div class="max-w-4xl mx-auto reveal">
            <h2 class="text-4xl md:text-5xl font-bold mb-8">Get In Touch</h2>
            <div class="grid grid-cols-1 gap-8 text-left">
                <div class="contact-info-box">
                    <h3 class="text-2xl font-semibold mb-6 text-center">Contact Information</h3>
                    <div class="space-y-4 text-center text-lg">
                        <p><span class="font-medium text-gray-400">Email:</span> <a href="mailto:thehighonsofficial@gmail.com">thehighonsofficial@gmail.com</a></p>
                        <p><span class="font-medium text-gray-400">Location:</span> Navsari, Gujarat - 396445</p>
                         <p class="text-sm text-gray-500">(Online orders via this site for local delivery only)</p>
                    </div>
                    <div class="flex justify-center space-x-6 mt-8 social-icons">
                        <a href="https://instagram.com/thehighons" target="_blank" rel="noopener noreferrer" aria-label="Follow us on Instagram"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="py-10 mt-auto">
        <div class="max-w-7xl mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-6">
                <div>
                    <span class="text-2xl font-bold tracking-wide brand-name">THE HIGHON'S</span>
                    <p class="mt-1 text-sm text-gray-400">Premium Creative Supplies - Navsari</p>
                </div>
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-2 text-sm">
                    <a href="#products">Products</a>
                    <a href="#order">Place Order</a>
                    <a href="#request">Request</a>
                    <a href="#contact">Contact</a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-6 text-center text-gray-500 text-xs">
                <p> <span id="footerYear"></span> The Highon's.</p>
            </div>
        </div>
    </footer>

    <div id="productModal" class="fixed inset-0 z-[70] modal-backdrop flex items-center justify-center hidden p-4">
        <div class="modal-content relative max-w-lg w-full mx-auto animate__animated animate__zoomIn animate__faster overflow-hidden">
             <button onclick="closeModal()" class="modal-close-btn absolute top-4 right-4 text-3xl leading-none z-10" aria-label="Close product details modal">&times;</button>
             <div class="p-6 sm:p-8 max-h-[80vh] overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <img id="modalImg" src="" alt="" class="w-full h-64 md:h-full object-contain p-2" loading="lazy">
                    <div class="flex flex-col justify-center">
                        <h3 id="modalName" class="text-2xl lg:text-3xl font-bold mb-3"></h3>
                        <p id="modalDesc" class="text-sm lg:text-base mb-5"></p>
                        <p id="modalPrice" class="modal-price mb-6"></p>
                        <p class="text-sm text-gray-400">To order this item, please go to the <a href="#products" onclick="closeModal()" class="text-purple-400 hover:text-emerald-400 underline">Our Collection section</a> and click 'Add' on the product card.</p>
                    </div>
                </div>
             </div>
        </div>
    </div>

    <script>
        // --- Constants ---
        const USER_DETAILS_STORAGE_KEY = 'highonsUserDetails'; // Key for localStorage
        const CART_STORAGE_KEY = 'highonsCartItems'; // Key for localStorage
        const TERMS_AGREED_STORAGE_KEY = 'highonsTermsAgreed'; // Key for terms agreement

        // --- Product Data (Kept from original code) ---
        const products = {
             keychains: [
                { id: "kc001", name: "Thor Loki Keychain", price: 99, img: "Screenshot_20250422_132243_Meesho.jpg", desc: "High-quality metal keychain featuring Thor and Loki designs" },
                { id: "kc002", name: "Thor Hammer Keychain", price: 89, img: "Screenshot_20250422_131740_Meesho.jpg", desc: "Durable Mjolnir keychain with detailed engraving" },
                { id: "kc003", name: "Demon slayer katana keychain", price: 159, img: "Screenshot_20250424_141150_Meesho.jpg", desc: "Miniature katana keychain from Demon Slayer anime" },
                { id: "kc004", name: "Pikachu Keychain", price: 109, img: "Screenshot_20250422_131948_Meesho.jpg", desc: "Cute Pikachu keychain with enamel finish" }
            ],
            artSupplies: [
                { id: "as001", name: "Camel water colour tube", price: 169, img: "Screenshot_20250424_134214_Meesho.jpg", desc: "Professional-grade watercolor tubes, set of 12 vibrant colors" },
                { id: "as002", name: "FLAIR Acrylic marker", price: 359, img: "Screenshot_20250423_144509_Meesho.jpg", desc: "Premium acrylic paint markers, fine tip for detailed work" },
                { id: "as003", name: "Levin Acrylic Markers", price: 409, img: "Screenshot_20250423_140558_Meesho.jpg", desc: "Dual-tip acrylic markers with broad and fine tips" },
                { id: "as004", name: "Marker Set of 48", price: 299, img: "Touch-48-Color-Marker-Pen-Set-Kids-Art-Essentials-Double-Ended-Vibrant-Colors-Non-Bleeding-Wholesale-Discount-.webp", desc: "48-color marker set with dual tips for versatility" },
                { id: "as005", name: "Markers Set of 24", price: 179, img: "81B5uZXhYEL._AC_UF1000,1000_QL80_.jpg", desc: "24-color marker set, perfect for beginners" },
                { id: "as006", name: "Paint Brush 12 sizes", price: 99, img: "Screenshot_20250423_195924_Meesho.jpg", desc: "Professional paint brush set with 12 different sizes" },
                { id: "as007", name: "Sponge Dabbing Brush 5 Piece Set", price: 99, img: "41fvlzAzMWL._AC_.jpg", desc: "Sponge brush set for texture painting and special effects" },
                { id: "as008", name: "artist gesso + Decor varnish combo", price: 259, img: "camel-combo.jpg", desc: "Premium gesso (100ml) and varnish combo for art projects" }
            ],
            stationery: [
                { id: "st001", name: "Correction Tape", price: 70, img: "51l7S8XUY0L.jpg", desc: "Smooth correction tape for error-free writing" },
                { id: "st002", name: "Hot Melt Glue Gun ", price: 220, img: "71xHhYjWcIL.jpg", desc: "glue gun for more effective bond for crafts" },
                { id: "st003", name: "Sketch Kit", price: 619, img: "Screenshot_20250423_205027_Meesho.jpg", desc: "Complete sketching kit with pencils, erasers and sharpeners" },
                { id: "st004", name: "Luxury Pen", price: 199, img: "Screenshot_20250422_001401.jpg", desc: "Premium metal body pen with smooth ink flow" },
                { id: "st005", name: "Sketch book A5 (100pg)", price: 119, img: "Screenshot_20250423_204415_Meesho.jpg", desc: "A5 size sketchbook with 100gsm paper, 100 pages" }
            ],
            diaries: [
                { id: "di001", name: "Hardcover Diary", price: 249, img: "81EROqfMQBL._AC_UF1000,1000_QL80_.jpg", desc: "Classic hardcover diary with premium paper" },
                { id: "di002", name: "Premium  Diary", price: 319, img: "IMG-20250422-WA0005.jpg", desc: "Premium leather-bound diary" },
                { id: "di003", name: "Mini Diary", price: 219, img: "Screenshot_20250422_215326_Meesho.jpg", desc: "diary with compact size" },
                { id: "di004", name: "Vintage Leather Journal", price: 499, img: "Screenshot_20250426_225225_Amazon.jpg", desc: "Premium leather diary with good quality paper" }
            ],
            gadgets: [
                 { id: "ga001", name: "Mini Thermal Printer", price: 899, img: "placeholder-gadget.png", desc: "Compact thermal printer for labels, notes & fun prints. Bluetooth connectivity." }
            ]
        };

         // --- Coupon Data (Code: { type: 'percentage_discount' | 'fixed_discount' | 'percentage_increase', value: number }) (Kept from original code) ---
         const coupons = {
             "JIANSPECIAL": { type: "percentage_increase", value: 20 }, // 20% increase (Example from original code)
             "NSL10": { type: "percentage_discount", value: 10 } // 10% discount (Requested by user)
         };


        // --- State Variables (Kept from original code) ---
        let currentModalProduct = null; // { category: string, index: number, id: string }
        let currentCategoryFilter = 'all';
        let orderItems = {}; // Stores product ID and quantity: { "productId": quantity, ... }


        // --- Utility Functions (Kept from original code) ---
        function escapeHtml(unsafe) {
            if (typeof unsafe !== 'string') return unsafe;
            return unsafe
                 .replace(/&/g, "&amp;")
                 .replace(/</g, "&lt;")
                 .replace(/>/g, "&gt;")
                 .replace(/"/g, "&quot;")
                 .replace(/'/g, "&#039;");
        }

        function findProduct(id) {
            for (const categoryKey in products) {
                const product = products[categoryKey].find(p => p.id === id);
                if (product) {
                    // Return product details along with its category
                    return { ...product, category: categoryKey };
                }
            }
            return null; // Product not found
        }

         function saveCart() {
             try {
                 localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(orderItems));
                 console.log("Cart saved:", orderItems);
             } catch (e) {
                 console.error("Error saving cart to localStorage:", e);
             }
         }

         function loadCart() {
             try {
                 const savedCart = localStorage.getItem(CART_STORAGE_KEY);
                 if (savedCart) {
                     const parsedCart = JSON.parse(savedCart);
                     // Basic validation: Ensure it's an object and quantities are numbers > 0
                     if (typeof parsedCart === 'object' && parsedCart !== null) {
                          orderItems = Object.fromEntries(
                              Object.entries(parsedCart)
                                  .filter(([productId, quantity]) => findProduct(productId) && typeof quantity === 'number' && quantity > 0)
                          );
                         console.log("Cart loaded:", orderItems);
                     } else {
                          orderItems = {}; // Start with an empty cart if invalid data is found
                         console.warn("Invalid cart data found in localStorage, starting with empty cart.");
                     }
                 } else {
                     orderItems = {}; // Start with empty cart if nothing is in storage
                     console.log("No cart data found in localStorage, starting with empty cart.");
                 }
             } catch (e) {
                 console.error("Error loading cart from localStorage:", e);
                 orderItems = {}; // Start with empty cart on error
             }
         }


        // --- Product Rendering (Adapted for new styling) ---
        function renderProducts(category = 'all', searchTerm = '') {
            const container = document.getElementById("productsContainer");
            if (!container) { console.error("productsContainer not found!"); return; }

            container.innerHTML = '<div class="loader"></div>'; // Show loader

            // Use a small delay to allow loader to show and avoid blocking
            setTimeout(() => {
                 try {
                    container.innerHTML = ''; // Clear loader/previous content
                    let hasProducts = false;
                    const searchTermLower = searchTerm.toLowerCase().trim();
                    currentCategoryFilter = category;

                    const createCategorySection = (catKey, items) => {
                        const filtered = items.filter(item =>
                            !searchTermLower ||
                            item.name.toLowerCase().includes(searchTermLower) ||
                            item.desc.toLowerCase().includes(searchTermLower)
                        );

                        if (filtered.length > 0) {
                            hasProducts = true;
                            const section = document.createElement('div');
                            section.className = 'mb-16';
                            const title = catKey.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
                            if (category === 'all' || category === catKey) {
                                section.innerHTML = `<h3 class="category-title reveal">${escapeHtml(title)}</h3>`;
                            }

                            const grid = document.createElement('div');
                            // Updated grid classes for more columns on larger screens and adjusted gaps
                            grid.className = 'grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8';
                            grid.id = `${catKey}Grid`;
                            section.appendChild(grid);
                            container.appendChild(section);

                            filtered.forEach((product, index) => { // Pass index here
                                const card = createProductCard(product, index); // Pass index to card creation
                                grid.appendChild(card);
                                observeElement(card); // Add to observer for reveal animation
                            });
                            // Observe title only if it's explicitly created for this category section
                            const categoryTitle = section.querySelector('.category-title');
                             if (categoryTitle) {
                                 observeElement(categoryTitle);
                             }
                        }
                    };

                    if (category === 'all') {
                        Object.entries(products).forEach(([catKey, items]) => {
                            createCategorySection(catKey, items);
                        });
                    } else if (products[category]) {
                        createCategorySection(category, products[category]);
                    }

                    if (!hasProducts) {
                        container.innerHTML = '<p class="text-center text-gray-400 py-12 text-lg">No products found matching your criteria.</p>';
                    }

                 } catch (error) {
                    console.error("Error rendering products:", error);
                    container.innerHTML = '<p class="text-center text-red-500 py-12 text-lg">Error loading products. Please try again later.</p>';
                }
            }, 50); // Small timeout
        }


        function createProductCard(product, index) { // Accept index
            const card = document.createElement("div");
            card.id = `product-${product.id}`; // Add ID for easy lookup
            card.className = "product-card reveal"; // Add reveal class
            card.setAttribute('data-product-id', product.id);
             card.setAttribute('data-index', index); // Add data-index

            const productNameSafe = escapeHtml(product.name);
            const productDescSafe = escapeHtml(product.desc);
            const productImgSafe = escapeHtml(product.img);

            const quantity = orderItems[product.id] || 0; // Get current quantity from state

            card.innerHTML = `
                <div class="product-image-wrapper"> <img src="${productImgSafe}" alt="${productNameSafe}" loading="lazy" class="product-img">
                </div>
                <div class="product-card-content"> <div>
                        <h3 title="${productNameSafe}">${productNameSafe}</h3>
                        <p class="product-desc" title="${productDescSafe}">${productDescSafe ? productDescSafe.substring(0, 80) + (productDescSafe.length > 80 ? '...' : '') : ''}</p>
                        <span class="block product-price">₹${product.price}</span>
                    </div>
                </div>
                <div class="product-card-controls mt-auto">
                    ${quantity === 0
                        ? `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${product.id}">Add</button>`
                        : `
                            <div class="product-quantity-controls" data-product-id="${product.id}">
                                <button type="button" class="btn btn-secondary btn-small btn-decrease" data-product-id="${product.id}" aria-label="Decrease quantity">-</button>
                                <span class="product-quantity">${quantity}</span>
                                <button type="button" class="btn btn-secondary btn-small btn-increase" data-product-id="${product.id}" aria-label="Increase quantity">+</button>
                            </div>
                        `
                    }
                </div>
            `;
             // Add click listener directly to the card for modal
             card.addEventListener('click', (event) => {
                 // Check if the click target is NOT one of the quantity control buttons
                 const target = event.target;
                 if (!target.closest('.product-card-controls') && !target.classList.contains('btn-add')) {
                      showModal(product.id);
                 }
             });

            return card;
        }

        // --- Order Management Functions (Kept from original code) ---
        function addItemToOrder(productId) {
            const product = findProduct(productId);
            if (!product) {
                console.error("Attempted to add non-existent product:", productId);
                return;
            }

            if (orderItems[productId]) {
                increaseQuantity(productId);
            } else {
                orderItems[productId] = 1;
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function increaseQuantity(productId) {
            const product = findProduct(productId);
             if (!product) {
                 console.error("Attempted to increase quantity for non-existent product:", productId);
                 return;
             }
            if (orderItems[productId] !== undefined) {
                orderItems[productId]++;
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            } else {
                 // This case shouldn't happen if UI is in sync with state, but handle defensively
                 addItemToOrder(productId);
            }
             console.log('Order Items:', orderItems);
        }

        function decreaseQuantity(productId) {
             const product = findProduct(productId);
             if (!product) {
                 console.error("Attempted to decrease quantity for non-existent product:", productId);
                 return;
             }
            if (orderItems[productId] !== undefined) {
                orderItems[productId]--;
                if (orderItems[productId] <= 0) {
                    delete orderItems[productId];
                }
                 saveCart();
                 updateProductCardUI(productId);
                 renderOrderSummary();
            }
             console.log('Order Items:', orderItems);
        }

        function updateProductCardUI(productId) {
            const card = document.getElementById(`product-${productId}`);
            if (!card) {
                 console.warn(`Product card not found for ID: ${productId}. Cannot update UI.`);
                 return;
            }

            const controlsContainer = card.querySelector('.product-card-controls');
            const quantity = orderItems[productId] || 0;

            controlsContainer.innerHTML = ''; // Clear current controls

            if (quantity === 0) {
                controlsContainer.innerHTML = `<button type="button" class="btn btn-primary btn-add w-full" data-product-id="${productId}">Add</button>`;
            } else {
                 controlsContainer.innerHTML = `
                    <div class="product-quantity-controls" data-product-id="${productId}">
                        <button type="button" class="btn btn-secondary btn-small btn-decrease" data-product-id="${productId}" aria-label="Decrease quantity">-</button>
                                <span class="product-quantity">${quantity}</span>
                                <button type="button" class="btn btn-secondary btn-small btn-increase" data-product-id="${productId}" aria-label="Increase quantity">+</button>
                            </div>
                 `;
            }
             // Event listeners for these buttons are handled by delegation on productsContainer
        }


        function renderOrderSummary() {
             const summaryDisplay = document.getElementById('orderSummaryDisplay');
             const hiddenSummaryInput = document.getElementById('hiddenOrderSummary');
             const formSubjectInput = document.getElementById('formSubject');
             const couponCodeInput = document.getElementById('couponCode');
             const couponFeedback = document.getElementById('couponFeedback');
             const placeOrderBtn = document.getElementById('placeOrderBtn');


             if (!summaryDisplay || !hiddenSummaryInput || !formSubjectInput || !couponCodeInput || !couponFeedback || !placeOrderBtn) {
                 console.error("One or more order summary/coupon/button elements not found.");
                 return;
             }

             const productIds = Object.keys(orderItems);
             let subtotal = 0;
             let displayHTML = '';
             let hiddenText = 'Order Summary:\n\n';

             if (productIds.length === 0) {
                 displayHTML = '<p>Add items from the collection above to see your order here.</p>';
                 hiddenText = 'Order is empty.';
                 formSubjectInput.value = 'New Order from The Highon\'s Site (Empty)';
                  couponCodeInput.disabled = true; // Disable coupon input if cart is empty
                  couponCodeInput.value = ''; // Clear coupon input if cart becomes empty
                  couponFeedback.textContent = '';
                  placeOrderBtn.disabled = true; // Disable order button
             } else {
                  couponCodeInput.disabled = false; // Enable coupon input if items are in cart
                  placeOrderBtn.disabled = false; // Enable order button

                 displayHTML += '<ul>';
                 productIds.forEach(productId => {
                     const product = findProduct(productId);
                     const quantity = orderItems[productId];
                     if (product && quantity > 0) {
                         const itemTotal = product.price * quantity;
                         subtotal += itemTotal;
                         displayHTML += `
                            <li>
                                <span class="order-item-name">${escapeHtml(product.name)}</span>
                                <span class="order-item-quantity">x ${quantity}</span>
                                <span class="order-item-price">₹${itemTotal.toFixed(2)}</span>
                            </li>
                         `;
                          hiddenText += `- ${escapeHtml(product.name)} x ${quantity} (₹${product.price.toFixed(2)} each = ₹${itemTotal.toFixed(2)})\n`;
                     }
                 });
                 displayHTML += '</ul>';

                 // Display Subtotal
                 displayHTML += `<div class="order-summary-line"><span>Subtotal:</span> <span>₹${subtotal.toFixed(2)}</span></div>`;
                 hiddenText += `\nSubtotal: ₹${subtotal.toFixed(2)}`;


                 // --- Apply Coupon Logic ---
                 let finalTotal = subtotal;
                 let priceAdjustment = 0; // Can be positive (increase) or negative (discount)
                 let feedbackMessage = '';
                 let adjustmentLineHTML = '';
                 let hiddenAdjustmentText = '';
                 let couponApplied = false;

                 const enteredCouponCode = couponCodeInput.value.trim().toUpperCase(); // Case-insensitive

                 if (enteredCouponCode) {
                     const coupon = coupons[enteredCouponCode];
                     if (coupon) {
                          couponApplied = true;
                         if (coupon.type === 'percentage_increase') {
                             priceAdjustment = subtotal * (coupon.value / 100);
                             finalTotal = subtotal + priceAdjustment;
                             feedbackMessage = `Coupon "${enteredCouponCode}" applied: +${coupon.value}% increase.`;
                             adjustmentLineHTML = `<div class="order-summary-line increase-line"><span>Coupon (${enteredCouponCode}):</span> <span>+₹${priceAdjustment.toFixed(2)}</span></div>`;
                             hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (+${coupon.value}% Increase) +₹${priceAdjustment.toFixed(2)}`;
                              couponFeedback.style.color = 'var(--danger-color)'; // Red for increase
                         } else if (coupon.type === 'percentage_discount') {
                             priceAdjustment = subtotal * (coupon.value / 100);
                             finalTotal = subtotal - priceAdjustment;
                             feedbackMessage = `Coupon "${enteredCouponCode}" applied: ${coupon.value}% off!`;
                             adjustmentLineHTML = `<div class="order-summary-line discount-line"><span>Coupon (${enteredCouponCode}):</span> <span>-₹${priceAdjustment.toFixed(2)}</span></div>`;
                             hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (-${coupon.value}% Discount) -₹${priceAdjustment.toFixed(2)}`;
                              couponFeedback.style.color = 'var(--success-color)'; // Green for discount
                         }
                         // Add logic for other coupon types (fixed discount) here if needed
                         // else if (coupon.type === 'fixed_discount') {
                         //     priceAdjustment = coupon.value;
                         //     finalTotal = subtotal - priceAdjustment;
                         //     feedbackMessage = `Coupon "${enteredCouponCode}" applied: ₹${coupon.value} off!`;
                         //     adjustmentLineHTML = `<div class="order-summary-line discount-line"><span>Coupon (${enteredCouponCode}):</span> <span>-₹${priceAdjustment.toFixed(2)}</span></div>`;
                         //     hiddenAdjustmentText = `\nCoupon Applied: ${enteredCouponCode} (₹${coupon.value} Fixed Discount) -₹${priceAdjustment.toFixed(2)}`;
                         //     couponFeedback.style.color = 'var(--success-color)'; // Green for discount
                         // }
                         else {
                             feedbackMessage = `Coupon "${enteredCouponCode}" has an unknown type.`;
                             couponApplied = false; // Mark as not applied if type is unknown
                              couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                         }
                     } else {
                         feedbackMessage = `Invalid coupon code: "${enteredCouponCode}"`;
                          couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                     }
                 } else {
                     // No coupon code entered or code was cleared
                     feedbackMessage = ''; // Clear feedback
                      couponFeedback.style.color = 'var(--text-secondary)'; // Default color
                 }

                 // Ensure total doesn't go below zero due to fixed discounts (percentage discounts won't)
                 finalTotal = Math.max(0, finalTotal);

                 // Append adjustment line if applicable
                 if (adjustmentLineHTML) {
                     displayHTML += adjustmentLineHTML;
                 }
                 couponFeedback.textContent = feedbackMessage;
                 hiddenText += hiddenAdjustmentText;


                 // Display Final Total
                 displayHTML += `<div class="order-total">Final Total: ₹${finalTotal.toFixed(2)}</div>`;
                 hiddenText += `\nFinal Total: ₹${finalTotal.toFixed(2)}`;

                 // Update form subject with final total and coupon status
                 formSubjectInput.value = `New Order from The Highon's Site (Final ₹${finalTotal.toFixed(2)})` + (couponApplied ? ` - Coupon: ${enteredCouponCode}` : '');

             }

             summaryDisplay.innerHTML = displayHTML;
             hiddenSummaryInput.value = hiddenText;
        }

        // --- User Details Management (using localStorage) (Kept from original code) ---
        function loadUserDetails() {
            const userDetails = localStorage.getItem(USER_DETAILS_STORAGE_KEY);
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');
            const forgetButton = document.getElementById('forgetMyDetailsBtn');

            if (userDetails && nameInput && emailInput && phoneInput && addressInput && forgetButton) {
                try {
                    const parsedDetails = JSON.parse(userDetails);
                    // Populate if data exists and is not empty
                    if (parsedDetails.name || parsedDetails.email || parsedDetails.phone || parsedDetails.address) {
                        nameInput.value = parsedDetails.name || '';
                        emailInput.value = parsedDetails.email || '';
                        phoneInput.value = parsedDetails.phone || '';
                        addressInput.value = parsedDetails.address || '';
                        forgetButton.classList.remove('hidden'); // Show forget button
                    } else {
                         forgetButton.classList.add('hidden'); // Hide if data is empty object
                    }
                } catch (e) {
                    console.error("Error parsing user details from localStorage", e);
                    clearUserDetails(); // Clear invalid data
                }
            } else if (forgetButton) {
                 forgetButton.classList.add('hidden'); // Hide forget button if no data or elements missing
            }
        }

        function saveUserDetails() {
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');

            if (nameInput && emailInput && phoneInput && addressInput) {
                const userDetails = {
                    name: nameInput.value,
                    email: emailInput.value,
                    phone: phoneInput.value,
                    address: addressInput.value
                };
                 // Save only if name and email are provided (basic check)
                 if(userDetails.name && userDetails.email) {
                    try {
                         localStorage.setItem(USER_DETAILS_STORAGE_KEY, JSON.stringify(userDetails));
                         console.log("User details saved.");
                         // Show forget button after saving
                          const forgetButton = document.getElementById('forgetMyDetailsBtn');
                          if(forgetButton) forgetButton.classList.remove('hidden');
                    } catch (e) {
                         console.error("Error saving user details to localStorage:", e);
                    }
                 } else {
                     console.log("User details not saved: Name or Email missing.");
                 }
            }
        }

        function clearUserDetails() {
            localStorage.removeItem(USER_DETAILS_STORAGE_KEY);
            const nameInput = document.getElementById('orderName');
            const emailInput = document.getElementById('orderEmail');
            const phoneInput = document.getElementById('orderPhone');
            const addressInput = document.getElementById('orderAddress');
             const forgetButton = document.getElementById('forgetMyDetailsBtn');


            if (nameInput) nameInput.value = '';
            if (emailInput) emailInput.value = '';
            if (phoneInput) phoneInput.value = '';
            if (addressInput) addressInput.value = '';
            if (forgetButton) forgetButton.classList.add('hidden');

            console.log("User details cleared.");
        }


        // --- UI Interaction Functions (Kept from original code, adapted for new styling) ---

        function showModal(productId) {
           try {
                const product = findProduct(productId);
                if (!product) {
                    console.error("Product not found for modal:", productId);
                    return;
                }

                const modalImg = document.getElementById('modalImg');
                const modalName = document.getElementById('modalName');
                const modalDesc = document.getElementById('modalDesc');
                const modalPrice = document.getElementById('modalPrice');
                const productModal = document.getElementById('productModal');

                if (!modalImg || !modalName || !modalDesc || !modalPrice || !productModal) {
                     console.error("Product Modal elements missing!");
                     return;
                }

                modalImg.src = escapeHtml(product.img);
                modalImg.alt = escapeHtml(product.name);
                modalName.textContent = escapeHtml(product.name);
                modalDesc.textContent = escapeHtml(product.desc);
                modalPrice.textContent = `₹${product.price}`;

                productModal.classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Prevent body scroll

           } catch (error) {
                console.error("Error showing product modal:", error);
                closeModal();
           }
        }

        function closeModal() {
          const productModal = document.getElementById('productModal');
          if (productModal) {
            productModal.classList.add('hidden');
          }
          document.body.classList.remove('overflow-hidden'); // Re-enable body scroll
        }

        function toggleMobileMenu() {
          const mobileMenu = document.getElementById('mobileMenu');
          if (mobileMenu) {
            mobileMenu.classList.toggle('hidden');
          }
        }


        // --- Scroll Animation Observer (Kept from original code) ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const target = entry.target;
                    const index = target.getAttribute('data-index');
                    // Calculate delay based on index (adjust multiplier for desired effect)
                    const delay = index * 50; // 50ms delay per element

                    // Apply the calculated delay
                    target.style.transitionDelay = `${delay}ms`;

                    // Add the visible class to trigger the animation
                    target.classList.add('visible');

                    // Optional: unobserve after revealing to save resources if element won't be hidden again
                    // observer.unobserve(entry.target);
                } else {
                     // Optional: remove visible class and reset delay if you want elements to re-animate on scroll back up
                     // target.classList.remove('visible');
                     // target.style.transitionDelay = '0s'; // Reset delay when not intersecting
                }
            });
        }, {
            threshold: 0.1 // Trigger when 10% of the element is visible
        });
        function observeElement(element) {
            if (element) {
                // Reset initial state before observing if the element might be re-added (like after filtering/searching)
                 element.classList.remove('visible');
                 element.style.transitionDelay = '0s';
                observer.observe(element);
            }
        }

        // --- Terms Agreement Overlay Logic ---
        function showTermsOverlay() {
            const termsOverlay = document.getElementById('termsOverlay');
            const agreementPrompt = document.getElementById('agreementPrompt');
            const fullTermsText = document.getElementById('fullTermsText');

            if (termsOverlay && agreementPrompt && fullTermsText) {
                // Ensure prompt is visible and full text is hidden initially
                agreementPrompt.classList.remove('hidden');
                fullTermsText.classList.add('hidden');

                // Display the overlay
                termsOverlay.classList.remove('hidden');
                document.body.classList.add('overflow-hidden'); // Prevent background scroll
            } else {
                 console.error("Terms overlay elements not found in showTermsOverlay!");
            }
        }

        function hideTermsOverlay() {
            const termsOverlay = document.getElementById('termsOverlay');
            if (termsOverlay) {
                termsOverlay.classList.add('hidden');
                document.body.classList.remove('overflow-hidden'); // Allow background scroll
            }
        }

        function agreeToTerms() {
             try {
                localStorage.setItem(TERMS_AGREED_STORAGE_KEY, 'true');
                console.log("Terms agreed. Hiding overlay and initializing website.");
                hideTermsOverlay();
                // Now that terms are agreed, proceed with normal website initialization
                initializeWebsite();
             } catch (error) {
                 console.error("Error during agreeToTerms:", error);
                 // Optionally show an error message to the user
                 alert("An error occurred while trying to accept terms. Please refresh the page.");
                 hideTermsOverlay(); // Try to hide overlay even on error
             }
        }

        function viewFullTerms() {
             try {
                const agreementPrompt = document.getElementById('agreementPrompt');
                const fullTermsText = document.getElementById('fullTermsText');
                 const termsModalContent = document.getElementById('termsModalContent');
                 const backBtn = document.getElementById('backToAgreementBtn');

                 if (agreementPrompt && fullTermsText && termsModalContent && backBtn) {
                    agreementPrompt.classList.add('hidden');
                    fullTermsText.classList.remove('hidden');
                     // Scroll T&C text to top when viewed
                     termsModalContent.scrollTop = 0;

                    // Attach listener to the back button *now* that it's potentially visible
                    // Use .onclick = null to remove previous handlers before assigning
                    backBtn.onclick = null; // Remove any previously attached listeners
                    backBtn.onclick = backToAgreement; // Assign the handler

                } else {
                     console.error("Terms modal content elements missing in viewFullTerms!");
                }
             } catch (error) {
                 console.error("Error during viewFullTerms:", error);
             }
        }

        function backToAgreement() {
             try {
                 const agreementPrompt = document.getElementById('agreementPrompt');
                 const fullTermsText = document.getElementById('fullTermsText');
                 if (agreementPrompt && fullTermsText) {
                    agreementPrompt.classList.remove('hidden');
                    fullTermsText.classList.add('hidden');
                } else {
                     console.error("Terms modal content elements missing in backToAgreement!");
                }
             } catch (error) {
                 console.error("Error during backToAgreement:", error);
             }
        }


        // --- Website Initialization Function ---
        function initializeWebsite() {
             try {
                 console.log("initializeWebsite function started.");
                 // Set footer year
                 const footerYear = document.getElementById('footerYear');
                 if (footerYear) footerYear.textContent = new Date().getFullYear();

                 // Load cart and user details from local storage
                 loadCart();
                 loadUserDetails();

                 // Initial render of products and order summary based on loaded cart
                 renderProducts('all', ''); // This function already has a try/catch

                 renderOrderSummary();


                 // --- Event Listeners Setup for Main Website ---

                 // Product Search Input
                 const productSearchInput = document.getElementById('productSearch');
                 if (productSearchInput) {
                      let searchTimeout;
                      productSearchInput.addEventListener('input', function() {
                           try {
                               clearTimeout(searchTimeout);
                               const searchTerm = this.value;
                               searchTimeout = setTimeout(() => {
                                   renderProducts(currentCategoryFilter, searchTerm);
                               }, 300); // Slightly longer debounce
                           } catch (error) {
                               console.error("Error in product search input handler:", error);
                           }
                      });
                 } else { console.error("Product search input not found."); }

                 // Category Filter Select
                 const categoryFilterSelect = document.getElementById('categoryFilter');
                 if (categoryFilterSelect) {
                      categoryFilterSelect.addEventListener('change', function() {
                         try {
                           const searchVal = document.getElementById('productSearch')?.value || '';
                           renderProducts(this.value, searchVal);
                         } catch (error) {
                           console.error("Error in category filter handler:", error);
                         }
                      });
                 } else { console.error("Category filter select not found."); }

                  // Modal close on background click (Product Modal)
                  const productModal = document.getElementById('productModal');
                  if (productModal) {
                      productModal.addEventListener('click', (event) => {
                           try {
                               if (event.target === productModal) {
                                   closeModal();
                               }
                           } catch (error) {
                              console.error("Error in product modal background click handler:", error);
                           }
                      });
                  }

                   // --- Event Delegation for Product Card Controls and Modal Trigger ---
                   const productsContainer = document.getElementById('productsContainer');
                   if (productsContainer) {
                       // Add event listener once to the container
                       productsContainer.addEventListener('click', (event) => {
                            try {
                                const target = event.target;
                                // Find the closest button or the card itself
                                const addButton = target.closest('.btn-add');
                                const increaseButton = target.closest('.btn-increase');
                                const decreaseButton = target.closest('.btn-decrease');
                                const productCard = target.closest('.product-card'); // Get the card

                                // Get product ID from the button or the card
                                const productId = addButton?.getAttribute('data-product-id') ||
                                                    increaseButton?.getAttribute('data-product-id') ||
                                                    decreaseButton?.getAttribute('data-product-id') ||
                                                    productCard?.getAttribute('data-product-id');


                                if (!productId) return; // Not inside a relevant element with product ID

                                if (addButton) {
                                    event.stopPropagation(); // Prevent card click handler
                                    addItemToOrder(productId);
                                } else if (increaseButton) {
                                     event.stopPropagation(); // Prevent card click handler
                                    increaseQuantity(productId);
                                } else if (decreaseButton) {
                                     event.stopPropagation(); // Prevent card click handler
                                    decreaseQuantity(productId);
                                }
                                 // Card click handler (for showing product modal) is attached directly to the card in createProductCard
                            } catch (error) {
                               console.error("Error in products container click handler:", error);
                            }
                       });
                   } else { console.error("productsContainer not found for event delegation."); }


                   // --- Coupon Input Listener ---
                   const couponCodeInput = document.getElementById('couponCode');
                   if (couponCodeInput) {
                       couponCodeInput.addEventListener('input', function() {
                            try {
                                renderOrderSummary(); // Update summary on input change
                            } catch (error) {
                                console.error("Error in coupon input handler:", error);
                            }
                       });
                   } else { console.error("Coupon code input not found."); }


                  // --- Order Form Submission Listener ---
                  const orderForm = document.getElementById('orderForm');
                  if (orderForm) {
                      orderForm.addEventListener('submit', function(event) {
                           try {
                               // Basic validation: Check if any items are in the order
                               if (Object.keys(orderItems).length === 0) {
                                    alert("Your order list is empty. Please add items from the collection before placing an order.");
                                    event.preventDefault(); // Prevent form submission
                                    return; // Stop here if order is empty
                               }

                                // Save user details before submitting
                               saveUserDetails();

                               // Ensure the hidden order summary is populated just before submitting
                               // This also re-calculates based on the final coupon input value
                               renderOrderSummary();

                               // Optional: Disable the submit button to prevent double clicks
                               const submitButton = orderForm.querySelector('button[type="submit"]');
                               if(submitButton) {
                                   submitButton.disabled = true;
                                   submitButton.textContent = 'Placing Order...';
                               }
                               // FormSubmit.co handles the actual AJAX submission or page redirect
                           } catch (error) {
                               console.error("Error in order form submit handler:", error);
                               alert("An error occurred while submitting your order. Please try again.");
                               event.preventDefault(); // Prevent form submission on error
                           }
                      });
                   } else { console.error("Order form not found."); }

                // --- Forget My Details Button Listener ---
                const forgetButton = document.getElementById('forgetMyDetailsBtn');
                if(forgetButton) {
                    forgetButton.addEventListener('click', clearUserDetails);
                }

               // Observe elements with 'reveal' class initially present in HTML
               // These are non-product card elements like titles, headers, etc.
               document.querySelectorAll('.reveal').forEach(el => {
                   // Don't observe product cards here, they are handled in renderProducts
                   if (!el.classList.contains('product-card')) {
                      observeElement(el);
                   }
               });

               console.log("Website initialization complete.");

            } catch (error) {
               console.error("Critical error during website initialization:", error);
               // Use a more robust error display if initialization fails
               const errorDiv = document.createElement('div');
               errorDiv.style.cssText = "padding: 40px; text-align: center; font-family: sans-serif; color: white; background-color: #333; margin: 20px; border-radius: 8px;";
               errorDiv.innerHTML = `<h1>Oops!</h1><p>Something went wrong while loading the page content.</p><p>Please <a href="javascript:location.reload();" style="color: #D4AF37; text-decoration: underline;">refresh</a> and try again.</p><p style="font-size: 0.8em; color: #AAA;">Error details: ${escapeHtml(error.message)}</p>`;
               // Attempt to clear existing body content before appending error
               const body = document.body;
               if(body) {
                   while(body.firstChild){
                       body.removeChild(body.firstChild);
                   }
                   body.appendChild(errorDiv);
               } else {
                   document.documentElement.innerHTML = ''; // Fallback if body not found
                   document.documentElement.appendChild(errorDiv);
               }
           }
        }


        // --- DOMContentLoaded - Check for terms agreement before initializing the website ---
        document.addEventListener('DOMContentLoaded', () => {
             try {
                console.log("DOMContentLoaded fired.");
                const termsAgreed = localStorage.getItem(TERMS_AGREED_STORAGE_KEY);
                console.log("Terms agreed status from localStorage:", termsAgreed);

                if (termsAgreed === 'true') {
                    // Terms already agreed, initialize the website normally
                    console.log("Terms already agreed. Initializing website directly.");
                    initializeWebsite();
                } else {
                    // Terms not agreed, show the agreement overlay
                    console.log("Terms not agreed. Showing terms overlay.");
                    showTermsOverlay();

                    // Set up listeners for the terms overlay buttons that are visible initially
                    const enterBtn = document.getElementById('enterWebsiteBtn');
                    const viewTermsLink = document.getElementById('viewTermsLink');
                    // The back button listener will be set up in viewFullTerms() when it becomes visible

                    if (enterBtn) {
                         enterBtn.addEventListener('click', agreeToTerms);
                         console.log("Enter button listener attached.");
                    } else {
                         console.error("Enter button not found!");
                    }

                    if (viewTermsLink) {
                         viewTermsLink.addEventListener('click', (e) => {
                             e.preventDefault(); // Prevent the default link behavior
                             viewFullTerms();
                             console.log("View Terms link clicked.");
                         });
                         console.log("View Terms link listener attached.");
                    } else {
                         console.error("View Terms link not found!");
                    }
                }
             } catch (error) {
                 console.error("Critical error during DOMContentLoaded execution:", error);
                  // Fallback error display if even DOMContentLoaded fails badly
                  const errorDiv = document.createElement('div');
                  errorDiv.style.cssText = "padding: 40px; text-align: center; font-family: sans-serif; color: white; background-color: #333; margin: 20px; border-radius: 8px;";
                  errorDiv.innerHTML = `<h1>Oops!</h1><p>A critical error occurred very early.</p><p>Please try <a href="javascript:location.reload();" style="color: #D4AF37; text-decoration: underline;">refreshing</a> the page.</p><p style="font-size: 0.8em; color: #AAA;">Error details: ${escapeHtml(error.message)}</p>`;
                  const body = document.body;
                  if(body) {
                      while(body.firstChild){
                          body.removeChild(body.firstChild);
                      }
                      body.appendChild(errorDiv);
                  } else {
                       document.documentElement.innerHTML = ''; // Fallback if body not found
                       document.documentElement.appendChild(errorDiv);
                   }
             }
        });

    </script>

</body>
</html>
